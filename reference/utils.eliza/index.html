
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A modern Python gRPC service with streaming, async, and CloudEvents">
      
      
        <meta name="author" content="The gRPC Service Squad">
      
      
        <link rel="canonical" href="https://soundphilosopher.github.io/basic-grpc-service-python/reference/utils.eliza/">
      
      
        <link rel="prev" href="../services.basic_service/">
      
      
        <link rel="next" href="../utils.some/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Eliza Chatbot - üöÄ Basic gRPC Service Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#eliza-chatbot" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="üöÄ Basic gRPC Service Documentation" class="md-header__button md-logo" aria-label="üöÄ Basic gRPC Service Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            üöÄ Basic gRPC Service Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Eliza Chatbot
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/soundphilosopher/basic-grpc-service-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    basic-grpc-service-python
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/" class="md-tabs__link">
        
  
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../testing/" class="md-tabs__link">
        
  
  
    
  
  Testing

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../development/" class="md-tabs__link">
        
  
  
    
  
  Development

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="üöÄ Basic gRPC Service Documentation" class="md-nav__button md-logo" aria-label="üöÄ Basic gRPC Service Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    üöÄ Basic gRPC Service Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/soundphilosopher/basic-grpc-service-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    basic-grpc-service-python
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services.basic_service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Eliza Chatbot
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Eliza Chatbot
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#utils.eliza" class="md-nav__link">
    <span class="md-ellipsis">
      eliza
    </span>
  </a>
  
    <nav class="md-nav" aria-label="eliza">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza" class="md-nav__link">
    <span class="md-ellipsis">
      Eliza
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Eliza">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza.__reflect" class="md-nav__link">
    <span class="md-ellipsis">
      __reflect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza.reply" class="md-nav__link">
    <span class="md-ellipsis">
      reply
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Reply" class="md-nav__link">
    <span class="md-ellipsis">
      Reply
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reply">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Reply-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Reply.is_goodbye" class="md-nav__link">
    <span class="md-ellipsis">
      is_goodbye
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils.some/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#utils.eliza" class="md-nav__link">
    <span class="md-ellipsis">
      eliza
    </span>
  </a>
  
    <nav class="md-nav" aria-label="eliza">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza" class="md-nav__link">
    <span class="md-ellipsis">
      Eliza
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Eliza">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza.__reflect" class="md-nav__link">
    <span class="md-ellipsis">
      __reflect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Eliza.reply" class="md-nav__link">
    <span class="md-ellipsis">
      reply
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Reply" class="md-nav__link">
    <span class="md-ellipsis">
      Reply
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Reply">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Reply-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.eliza.Reply.is_goodbye" class="md-nav__link">
    <span class="md-ellipsis">
      is_goodbye
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="eliza-chatbot">Eliza Chatbot</h1>
<blockquote>
<p>Classic ELIZA therapeutic chatbot implementation</p>
</blockquote>


<div class="doc doc-object doc-module">



<h2 id="utils.eliza" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">eliza</span>


</h2>

    <div class="doc doc-contents first">

        <p>üß† Eliza - Your Friendly Neighborhood AI Therapist</p>
<p>Welcome to the classic Eliza chatbot implementation! This module provides
a Python version of the famous ELIZA program, originally created by Joseph
Weizenbaum at MIT in 1964-1966. Eliza simulates a Rogerian psychotherapist
using pattern matching and clever reflections.</p>
<p>Why Eliza? Because sometimes you need someone to listen, even if that someone
is just a bunch of regular expressions pretending to care! ü§ñüíï</p>
<p>Features:
- Pattern-based conversation simulation
- Pronoun reflection ("I am sad" -&gt; "How long have you been sad?")
- Goodbye detection for natural conversation endings
- Randomized responses to keep things interesting
- Classic therapeutic responses that sound surprisingly human</p>
<p>Author: The AI Therapy Department üõãÔ∏è</p>










  <div class="doc doc-children">







<h3 id="utils.eliza-classes">Classes</h3>

<div class="doc doc-object doc-class">



<h4 id="utils.eliza.Eliza" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Eliza</span>


</h4>


    <div class="doc doc-contents ">


        <p>üß† The classic Eliza chatbot - Your digital Rogerian therapist!</p>
<p>Eliza uses pattern matching and reflection techniques to simulate
understanding and empathy. She's been helping people feel heard
since 1966, making her one of the most experienced therapists
in the business (even if she's not technically real).</p>
<p>How Eliza Works:
1. Matches your input against predefined patterns
2. Reflects pronouns back at you ("I am" becomes "you are")
3. Responds with contextually appropriate therapeutic responses
4. Falls back to generic responses when confused
5. Recognizes goodbye patterns to end conversations gracefully</p>
<p>Therapeutic Specialties:
- Active listening (pattern matching style!)
- Pronoun reflection therapy
- Question deflection techniques
- Family inquiry methods
- Emotional validation responses</p>


<details class="example-session" open>
  <summary>Example Session</summary>
  <p>You: "I am feeling sad today"
Eliza: "Did you come to me because you are feeling sad today?"
You: "My mother never understood me"
Eliza: "Tell me more about your family."
You: "Goodbye"
Eliza: "Thank you for talking with me."</p>
</details>







              <details class="quote">
                <summary>Source code in <code>utils/eliza.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span>
<span class="normal"><a href="#__codelineno-0-257">257</a></span>
<span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span>
<span class="normal"><a href="#__codelineno-0-300">300</a></span>
<span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="k">class</span><span class="w"> </span><span class="nc">Eliza</span><span class="p">:</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="sd">    üß† The classic Eliza chatbot - Your digital Rogerian therapist!</span>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">    Eliza uses pattern matching and reflection techniques to simulate</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="sd">    understanding and empathy. She&#39;s been helping people feel heard</span>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">    since 1966, making her one of the most experienced therapists</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="sd">    in the business (even if she&#39;s not technically real).</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="sd">    How Eliza Works:</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="sd">    1. Matches your input against predefined patterns</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="sd">    2. Reflects pronouns back at you (&quot;I am&quot; becomes &quot;you are&quot;)</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="sd">    3. Responds with contextually appropriate therapeutic responses</span>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="sd">    4. Falls back to generic responses when confused</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="sd">    5. Recognizes goodbye patterns to end conversations gracefully</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">    Therapeutic Specialties:</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="sd">    - Active listening (pattern matching style!)</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="sd">    - Pronoun reflection therapy</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="sd">    - Question deflection techniques</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="sd">    - Family inquiry methods</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="sd">    - Emotional validation responses</span>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">    Example Session:</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">        You: &quot;I am feeling sad today&quot;</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">        Eliza: &quot;Did you come to me because you are feeling sad today?&quot;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="sd">        You: &quot;My mother never understood me&quot;</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="sd">        Eliza: &quot;Tell me more about your family.&quot;</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="sd">        You: &quot;Goodbye&quot;</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="sd">        Eliza: &quot;Thank you for talking with me.&quot;</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">        üé≠ Initialize Eliza with her therapeutic training!</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">        Sets up all the patterns, responses, and reflection rules</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">        that make Eliza seem surprisingly human. Think of this as</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">        her going through therapy school, but really quickly.</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="c1"># üîÑ Reflection dictionary for pronoun swapping</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="c1"># This is the secret sauce that makes &quot;I am sad&quot; become &quot;you are sad&quot;</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>            <span class="s2">&quot;am&quot;</span><span class="p">:</span> <span class="s2">&quot;are&quot;</span><span class="p">,</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>            <span class="s2">&quot;was&quot;</span><span class="p">:</span> <span class="s2">&quot;were&quot;</span><span class="p">,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>            <span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="s2">&quot;you&quot;</span><span class="p">,</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>            <span class="s2">&quot;i&#39;d&quot;</span><span class="p">:</span> <span class="s2">&quot;you would&quot;</span><span class="p">,</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>            <span class="s2">&quot;i&#39;ve&quot;</span><span class="p">:</span> <span class="s2">&quot;you have&quot;</span><span class="p">,</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>            <span class="s2">&quot;i&#39;ll&quot;</span><span class="p">:</span> <span class="s2">&quot;you will&quot;</span><span class="p">,</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>            <span class="s2">&quot;my&quot;</span><span class="p">:</span> <span class="s2">&quot;your&quot;</span><span class="p">,</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>            <span class="s2">&quot;are&quot;</span><span class="p">:</span> <span class="s2">&quot;am&quot;</span><span class="p">,</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>            <span class="s2">&quot;you&#39;ve&quot;</span><span class="p">:</span> <span class="s2">&quot;I have&quot;</span><span class="p">,</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>            <span class="s2">&quot;you&#39;ll&quot;</span><span class="p">:</span> <span class="s2">&quot;I will&quot;</span><span class="p">,</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>            <span class="s2">&quot;your&quot;</span><span class="p">:</span> <span class="s2">&quot;my&quot;</span><span class="p">,</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>            <span class="s2">&quot;yours&quot;</span><span class="p">:</span> <span class="s2">&quot;mine&quot;</span><span class="p">,</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>            <span class="s2">&quot;you&quot;</span><span class="p">:</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>            <span class="s2">&quot;me&quot;</span><span class="p">:</span> <span class="s2">&quot;you&quot;</span><span class="p">,</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>            <span class="s2">&quot;myself&quot;</span><span class="p">:</span> <span class="s2">&quot;yourself&quot;</span><span class="p">,</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>            <span class="s2">&quot;yourself&quot;</span><span class="p">:</span> <span class="s2">&quot;myself&quot;</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>        <span class="p">}</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>        <span class="c1"># üëã Goodbye patterns - Because every therapy session must end</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">goodbye_patterns</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*(bye|goodbye|see you|farewell|quit|exit|leave).*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>                <span class="s2">&quot;Thank you for talking with me.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>                <span class="s2">&quot;Good-bye. This was really a nice talk.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>                <span class="s2">&quot;Thank you, that will be $150. Have a good day!&quot;</span><span class="p">,</span>  <span class="c1"># üí∞ Even AI therapists have bills!</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>                <span class="s2">&quot;Good-bye. I hope I have helped you.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>                <span class="s2">&quot;This was a nice session. Good-bye.&quot;</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>            <span class="p">])</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>        <span class="p">]</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>        <span class="c1"># üéØ Pattern-response pairs - Eliza&#39;s therapeutic toolkit</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>        <span class="c1"># Each tuple contains (regex_pattern, list_of_possible_responses)</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>            <span class="c1"># Apology handling - We don&#39;t need no stinkin&#39; apologies!</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bsorry\b.*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>                <span class="s2">&quot;Please don&#39;t apologize.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>                <span class="s2">&quot;Apologies are not necessary.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>                <span class="s2">&quot;What feelings do you have when you apologize?&quot;</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>            <span class="p">]),</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>            <span class="c1"># Memory exploration - Let&#39;s dig into those memories</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bremember\b (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>                <span class="s2">&quot;Do you often think of </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>                <span class="s2">&quot;Does thinking of </span><span class="si">{0}</span><span class="s2"> bring anything else to mind?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>                <span class="s2">&quot;What else do you remember?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>                <span class="s2">&quot;Why do you remember </span><span class="si">{0}</span><span class="s2"> just now?&quot;</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>            <span class="p">]),</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>            <span class="c1"># Dream analysis - Because dreams are windows to the soul, maybe</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bdream\b.*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>                <span class="s2">&quot;What does that dream suggest to you?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>                <span class="s2">&quot;Do you dream often?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>                <span class="s2">&quot;What persons appear in your dreams?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>                <span class="s2">&quot;Are you disturbed by your dreams?&quot;</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>            <span class="p">]),</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>            <span class="c1"># Family therapy - It always comes back to family, doesn&#39;t it?</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*(mother|mom|father|dad|parents|family).*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>                <span class="s2">&quot;Tell me more about your family.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>                <span class="s2">&quot;Who else in your family </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>                <span class="s2">&quot;Your </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>                <span class="s2">&quot;What else comes to mind when you think of your </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>            <span class="p">]),</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>            <span class="c1"># Emotional support - Sad feelings need validation</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\b(sad|unhappy|depressed|upset)\b.*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>                <span class="s2">&quot;I am sorry to hear that you are </span><span class="si">{0}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>                <span class="s2">&quot;Do you think coming here will help you not to be </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>                <span class="s2">&quot;I&#39;m sure it&#39;s not pleasant to be </span><span class="si">{0}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>                <span class="s2">&quot;Can you explain what made you </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>            <span class="p">]),</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>            <span class="c1"># Positive emotions - Let&#39;s explore that happiness!</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\b(happy|elated|glad|better)\b.*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>                <span class="s2">&quot;How have I helped you to be </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>                <span class="s2">&quot;Has your treatment made you </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>                <span class="s2">&quot;What makes you </span><span class="si">{0}</span><span class="s2"> just now?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>                <span class="s2">&quot;Can you explain why you are suddenly </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>            <span class="p">]),</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>            <span class="c1"># Belief exploration - Question those thoughts!</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\b(believe|think)\b (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>                <span class="s2">&quot;Do you really think so?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>                <span class="s2">&quot;But you are not sure you </span><span class="si">{0}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>                <span class="s2">&quot;Do you really doubt you </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>            <span class="p">]),</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>            <span class="c1"># Affirmative responses - When they say yes</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*(yes|yeah|yep).*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>                <span class="s2">&quot;You seem quite positive.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>                <span class="s2">&quot;You are sure?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>                <span class="s2">&quot;I see.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>                <span class="s2">&quot;I understand.&quot;</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>            <span class="p">]),</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>            <span class="c1"># Negative responses - When they say no</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*(no|nope|nah).*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>                <span class="s2">&quot;Are you saying &#39;No&#39; just to be negative?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>                <span class="s2">&quot;You are being a bit negative.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>                <span class="s2">&quot;Why not?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>                <span class="s2">&quot;Why &#39;No&#39;?&quot;</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>            <span class="p">]),</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>            <span class="c1"># Self-identification - &quot;I am&quot; statements get special treatment</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bi am (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>                <span class="s2">&quot;Did you come to me because you are </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>                <span class="s2">&quot;How long have you been </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>                <span class="s2">&quot;Do you believe it is normal to be </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>                <span class="s2">&quot;Do you enjoy being </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>            <span class="p">]),</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>            <span class="c1"># General self-reference - Deflect back to them</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bi (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>                <span class="s2">&quot;We should be discussing you, not me.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>                <span class="s2">&quot;Why do you say that?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>                <span class="s2">&quot;I see.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>                <span class="s2">&quot;And what does that tell you?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>                <span class="s2">&quot;How does that make you feel?&quot;</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>            <span class="p">]),</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>            <span class="c1"># Direct statements about Eliza - Turn it around</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\byou are (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>                <span class="s2">&quot;Why are you interested in whether I am </span><span class="si">{0}</span><span class="s2"> or not?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>                <span class="s2">&quot;Would you prefer if I were not </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>                <span class="s2">&quot;Perhaps I am </span><span class="si">{0}</span><span class="s2"> in your fantasies.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>                <span class="s2">&quot;Do you sometimes think I am </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>            <span class="p">]),</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>            <span class="c1"># General &quot;you&quot; statements - Deflect to patient</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>            <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\byou (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>                <span class="s2">&quot;We should be discussing you, not me.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>                <span class="s2">&quot;Oh, I </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>                <span class="s2">&quot;You&#39;re not really talking about me, are you?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>                <span class="s2">&quot;What makes you think I </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>            <span class="p">])</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>        <span class="p">]</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>        <span class="c1"># ü§∑‚Äç‚ôÄÔ∏è Default responses - When all else fails, be vague!</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>        <span class="c1"># These are the therapy equivalent of &quot;turn it off and on again&quot;</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">default_responses</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>            <span class="s2">&quot;Please tell me more.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>            <span class="s2">&quot;Let&#39;s change focus a bit... Tell me about your family.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>            <span class="s2">&quot;Can you elaborate on that?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>            <span class="s2">&quot;Why do you say that?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>            <span class="s2">&quot;I see.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>            <span class="s2">&quot;Very interesting.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>            <span class="s2">&quot;I see.  And what does that tell you?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>            <span class="s2">&quot;How does that make you feel?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>            <span class="s2">&quot;Do you feel strongly about discussing such things?&quot;</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>        <span class="p">]</span>
<a id="__codelineno-0-257" name="__codelineno-0-257"></a>
<a id="__codelineno-0-258" name="__codelineno-0-258"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">__reflect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text_fragment</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">        ü™û The magic mirror - reflect pronouns back to the user.</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="sd">        This is where the therapeutic magic happens! Eliza takes what you</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="sd">        said and reflects it back by swapping pronouns and perspective.</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="sd">        &quot;I am sad&quot; becomes &quot;you are sad&quot;, creating the illusion that</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="sd">        she&#39;s really listening and understanding.</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="sd">            text_fragment (str): The text to reflect back</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="sd">            str: The reflected text with pronouns swapped</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a><span class="sd">            &gt;&gt;&gt; eliza = Eliza()</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="sd">            &gt;&gt;&gt; eliza._Eliza__reflect(&quot;I am feeling happy&quot;)</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="sd">            &quot;you are feeling happy&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="sd">            This method preserves punctuation while doing the reflection,</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="sd">            because even AI therapists should have good grammar! ‚ú®</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>        <span class="c1"># Split into individual words for processing</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>        <span class="n">word_tokens</span> <span class="o">=</span> <span class="n">text_fragment</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>        <span class="n">reflected_words</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">word_tokens</span><span class="p">:</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>            <span class="c1"># Separate the actual word from any punctuation</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>            <span class="n">clean_word</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^\w]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>            <span class="n">punctuation</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">clean_word</span><span class="p">):]</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>            <span class="c1"># Apply reflection if we know how to transform this word</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>            <span class="k">if</span> <span class="n">clean_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span><span class="p">:</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>                <span class="n">reflected_word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span><span class="p">[</span><span class="n">clean_word</span><span class="p">]</span> <span class="o">+</span> <span class="n">punctuation</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>                <span class="n">reflected_word</span> <span class="o">=</span> <span class="n">word</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>            <span class="n">reflected_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reflected_word</span><span class="p">)</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>        <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">reflected_words</span><span class="p">)</span>
<a id="__codelineno-0-300" name="__codelineno-0-300"></a>
<a id="__codelineno-0-301" name="__codelineno-0-301"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Reply</span><span class="p">:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">        üí≠ Generate a therapeutic response to the user&#39;s message.</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="sd">        This is Eliza&#39;s main brain function! She analyzes what you said,</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">        tries to match it against her patterns, and responds with something</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">        that sounds like she actually cares (spoiler: she doesn&#39;t, but</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">        she&#39;s very good at pretending).</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">        Process:</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">        1. Check if it&#39;s a goodbye message first</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">        2. Try to match against therapeutic patterns</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">        3. If pattern matches and has groups, reflect them back</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">        4. If no patterns match, use a generic response</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">        5. Add some randomness to keep things interesting</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">            user_message (str): What the human said to Eliza</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">            Reply: Eliza&#39;s thoughtful (or generic) response</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">            &gt;&gt;&gt; eliza = Eliza()</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">            &gt;&gt;&gt; reply = eliza.reply(&quot;I am feeling sad&quot;)</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="sd">            &gt;&gt;&gt; reply.text</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a><span class="sd">            &quot;Did you come to me because you are feeling sad?&quot;</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="sd">            &gt;&gt;&gt; reply = eliza.reply(&quot;goodbye&quot;)</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="sd">            &gt;&gt;&gt; reply.goodbye</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">            True</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">            Empty messages get a gentle nudge to actually say something.</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">            Even AI therapists need something to work with! ü§∑‚Äç‚ôÄÔ∏è</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>        <span class="c1"># Handle empty or whitespace-only input</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">user_message</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>            <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="s2">&quot;Please say something.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>        <span class="c1"># Convert to lowercase for easier pattern matching</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>        <span class="n">lowercase_input</span> <span class="o">=</span> <span class="n">user_message</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>        <span class="c1"># üëã First priority: Check for goodbye patterns</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>        <span class="k">for</span> <span class="n">goodbye_pattern</span><span class="p">,</span> <span class="n">goodbye_responses</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">goodbye_patterns</span><span class="p">:</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">goodbye_pattern</span><span class="p">,</span> <span class="n">lowercase_input</span><span class="p">):</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>                <span class="n">farewell_message</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">goodbye_responses</span><span class="p">)</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>                <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">farewell_message</span><span class="p">,</span> <span class="n">goodbye</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>        <span class="c1"># üéØ Try to match therapeutic patterns</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>        <span class="k">for</span> <span class="n">pattern_regex</span><span class="p">,</span> <span class="n">response_templates</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="p">:</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>            <span class="n">pattern_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern_regex</span><span class="p">,</span> <span class="n">lowercase_input</span><span class="p">)</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>            <span class="k">if</span> <span class="n">pattern_match</span><span class="p">:</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>                <span class="c1"># Pick a random response template from this pattern</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>                <span class="n">chosen_response</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">response_templates</span><span class="p">)</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>                <span class="c1"># If the pattern captured groups, reflect and substitute them</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>                <span class="k">if</span> <span class="n">pattern_match</span><span class="o">.</span><span class="n">groups</span><span class="p">():</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>                    <span class="n">reflected_groups</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">__reflect</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">pattern_match</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>                    <span class="p">]</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>                    <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>                        <span class="c1"># Try to format the response with reflected text</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>                        <span class="n">personalized_response</span> <span class="o">=</span> <span class="n">chosen_response</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">reflected_groups</span><span class="p">)</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>                        <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">personalized_response</span><span class="p">)</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>                    <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>                        <span class="c1"># If formatting fails, just return the template as-is</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>                        <span class="c1"># (Sometimes the best therapy is keeping it simple)</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>                        <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">chosen_response</span><span class="p">)</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>                <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>                    <span class="c1"># No captured groups, just return the response</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>                    <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">chosen_response</span><span class="p">)</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>        <span class="c1"># ü§∑‚Äç‚ôÄÔ∏è No patterns matched - time for a generic response</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>        <span class="c1"># This is Eliza&#39;s equivalent of nodding thoughtfully</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>        <span class="n">fallback_response</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_responses</span><span class="p">)</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>        <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">fallback_response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">








<h5 id="utils.eliza.Eliza-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="utils.eliza.Eliza.__init__" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__init__</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">__init__</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>üé≠ Initialize Eliza with her therapeutic training!</p>
<p>Sets up all the patterns, responses, and reflection rules
that make Eliza seem surprisingly human. Think of this as
her going through therapy school, but really quickly.</p>


            <details class="quote">
              <summary>Source code in <code>utils/eliza.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span>
<span class="normal"><a href="#__codelineno-0-238">238</a></span>
<span class="normal"><a href="#__codelineno-0-239">239</a></span>
<span class="normal"><a href="#__codelineno-0-240">240</a></span>
<span class="normal"><a href="#__codelineno-0-241">241</a></span>
<span class="normal"><a href="#__codelineno-0-242">242</a></span>
<span class="normal"><a href="#__codelineno-0-243">243</a></span>
<span class="normal"><a href="#__codelineno-0-244">244</a></span>
<span class="normal"><a href="#__codelineno-0-245">245</a></span>
<span class="normal"><a href="#__codelineno-0-246">246</a></span>
<span class="normal"><a href="#__codelineno-0-247">247</a></span>
<span class="normal"><a href="#__codelineno-0-248">248</a></span>
<span class="normal"><a href="#__codelineno-0-249">249</a></span>
<span class="normal"><a href="#__codelineno-0-250">250</a></span>
<span class="normal"><a href="#__codelineno-0-251">251</a></span>
<span class="normal"><a href="#__codelineno-0-252">252</a></span>
<span class="normal"><a href="#__codelineno-0-253">253</a></span>
<span class="normal"><a href="#__codelineno-0-254">254</a></span>
<span class="normal"><a href="#__codelineno-0-255">255</a></span>
<span class="normal"><a href="#__codelineno-0-256">256</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="sd">    üé≠ Initialize Eliza with her therapeutic training!</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="sd">    Sets up all the patterns, responses, and reflection rules</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="sd">    that make Eliza seem surprisingly human. Think of this as</span>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="sd">    her going through therapy school, but really quickly.</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="c1"># üîÑ Reflection dictionary for pronoun swapping</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="c1"># This is the secret sauce that makes &quot;I am sad&quot; become &quot;you are sad&quot;</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span> <span class="o">=</span> <span class="p">{</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="s2">&quot;am&quot;</span><span class="p">:</span> <span class="s2">&quot;are&quot;</span><span class="p">,</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="s2">&quot;was&quot;</span><span class="p">:</span> <span class="s2">&quot;were&quot;</span><span class="p">,</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="s2">&quot;i&quot;</span><span class="p">:</span> <span class="s2">&quot;you&quot;</span><span class="p">,</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="s2">&quot;i&#39;d&quot;</span><span class="p">:</span> <span class="s2">&quot;you would&quot;</span><span class="p">,</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>        <span class="s2">&quot;i&#39;ve&quot;</span><span class="p">:</span> <span class="s2">&quot;you have&quot;</span><span class="p">,</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>        <span class="s2">&quot;i&#39;ll&quot;</span><span class="p">:</span> <span class="s2">&quot;you will&quot;</span><span class="p">,</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="s2">&quot;my&quot;</span><span class="p">:</span> <span class="s2">&quot;your&quot;</span><span class="p">,</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>        <span class="s2">&quot;are&quot;</span><span class="p">:</span> <span class="s2">&quot;am&quot;</span><span class="p">,</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>        <span class="s2">&quot;you&#39;ve&quot;</span><span class="p">:</span> <span class="s2">&quot;I have&quot;</span><span class="p">,</span>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>        <span class="s2">&quot;you&#39;ll&quot;</span><span class="p">:</span> <span class="s2">&quot;I will&quot;</span><span class="p">,</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>        <span class="s2">&quot;your&quot;</span><span class="p">:</span> <span class="s2">&quot;my&quot;</span><span class="p">,</span>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>        <span class="s2">&quot;yours&quot;</span><span class="p">:</span> <span class="s2">&quot;mine&quot;</span><span class="p">,</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a>        <span class="s2">&quot;you&quot;</span><span class="p">:</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a>        <span class="s2">&quot;me&quot;</span><span class="p">:</span> <span class="s2">&quot;you&quot;</span><span class="p">,</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>        <span class="s2">&quot;myself&quot;</span><span class="p">:</span> <span class="s2">&quot;yourself&quot;</span><span class="p">,</span>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a>        <span class="s2">&quot;yourself&quot;</span><span class="p">:</span> <span class="s2">&quot;myself&quot;</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a>    <span class="p">}</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>    <span class="c1"># üëã Goodbye patterns - Because every therapy session must end</span>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">goodbye_patterns</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*(bye|goodbye|see you|farewell|quit|exit|leave).*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a>            <span class="s2">&quot;Thank you for talking with me.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a>            <span class="s2">&quot;Good-bye. This was really a nice talk.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a>            <span class="s2">&quot;Thank you, that will be $150. Have a good day!&quot;</span><span class="p">,</span>  <span class="c1"># üí∞ Even AI therapists have bills!</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a>            <span class="s2">&quot;Good-bye. I hope I have helped you.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>            <span class="s2">&quot;This was a nice session. Good-bye.&quot;</span>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a>        <span class="p">])</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a>    <span class="p">]</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>    <span class="c1"># üéØ Pattern-response pairs - Eliza&#39;s therapeutic toolkit</span>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a>    <span class="c1"># Each tuple contains (regex_pattern, list_of_possible_responses)</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>        <span class="c1"># Apology handling - We don&#39;t need no stinkin&#39; apologies!</span>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bsorry\b.*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a>            <span class="s2">&quot;Please don&#39;t apologize.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>            <span class="s2">&quot;Apologies are not necessary.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a>            <span class="s2">&quot;What feelings do you have when you apologize?&quot;</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a>        <span class="p">]),</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a>        <span class="c1"># Memory exploration - Let&#39;s dig into those memories</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bremember\b (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a>            <span class="s2">&quot;Do you often think of </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a>            <span class="s2">&quot;Does thinking of </span><span class="si">{0}</span><span class="s2"> bring anything else to mind?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a>            <span class="s2">&quot;What else do you remember?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a>            <span class="s2">&quot;Why do you remember </span><span class="si">{0}</span><span class="s2"> just now?&quot;</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a>        <span class="p">]),</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a>        <span class="c1"># Dream analysis - Because dreams are windows to the soul, maybe</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bdream\b.*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a>            <span class="s2">&quot;What does that dream suggest to you?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a>            <span class="s2">&quot;Do you dream often?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a>            <span class="s2">&quot;What persons appear in your dreams?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a>            <span class="s2">&quot;Are you disturbed by your dreams?&quot;</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a>        <span class="p">]),</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>        <span class="c1"># Family therapy - It always comes back to family, doesn&#39;t it?</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*(mother|mom|father|dad|parents|family).*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>            <span class="s2">&quot;Tell me more about your family.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>            <span class="s2">&quot;Who else in your family </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span class="s2">&quot;Your </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>            <span class="s2">&quot;What else comes to mind when you think of your </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>        <span class="p">]),</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>        <span class="c1"># Emotional support - Sad feelings need validation</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\b(sad|unhappy|depressed|upset)\b.*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>            <span class="s2">&quot;I am sorry to hear that you are </span><span class="si">{0}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>            <span class="s2">&quot;Do you think coming here will help you not to be </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>            <span class="s2">&quot;I&#39;m sure it&#39;s not pleasant to be </span><span class="si">{0}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>            <span class="s2">&quot;Can you explain what made you </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a>        <span class="p">]),</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>        <span class="c1"># Positive emotions - Let&#39;s explore that happiness!</span>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\b(happy|elated|glad|better)\b.*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a>            <span class="s2">&quot;How have I helped you to be </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a>            <span class="s2">&quot;Has your treatment made you </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>            <span class="s2">&quot;What makes you </span><span class="si">{0}</span><span class="s2"> just now?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a>            <span class="s2">&quot;Can you explain why you are suddenly </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>        <span class="p">]),</span>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a>        <span class="c1"># Belief exploration - Question those thoughts!</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\b(believe|think)\b (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>            <span class="s2">&quot;Do you really think so?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a>            <span class="s2">&quot;But you are not sure you </span><span class="si">{0}</span><span class="s2">.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a>            <span class="s2">&quot;Do you really doubt you </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a>        <span class="p">]),</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a>        <span class="c1"># Affirmative responses - When they say yes</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*(yes|yeah|yep).*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a>            <span class="s2">&quot;You seem quite positive.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a>            <span class="s2">&quot;You are sure?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>            <span class="s2">&quot;I see.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a>            <span class="s2">&quot;I understand.&quot;</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a>        <span class="p">]),</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a>        <span class="c1"># Negative responses - When they say no</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*(no|nope|nah).*&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a>            <span class="s2">&quot;Are you saying &#39;No&#39; just to be negative?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a>            <span class="s2">&quot;You are being a bit negative.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a>            <span class="s2">&quot;Why not?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a>            <span class="s2">&quot;Why &#39;No&#39;?&quot;</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>        <span class="p">]),</span>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a>        <span class="c1"># Self-identification - &quot;I am&quot; statements get special treatment</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bi am (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>            <span class="s2">&quot;Did you come to me because you are </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a>            <span class="s2">&quot;How long have you been </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a>            <span class="s2">&quot;Do you believe it is normal to be </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a>            <span class="s2">&quot;Do you enjoy being </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a>        <span class="p">]),</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a>        <span class="c1"># General self-reference - Deflect back to them</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\bi (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a>            <span class="s2">&quot;We should be discussing you, not me.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a>            <span class="s2">&quot;Why do you say that?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>            <span class="s2">&quot;I see.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>            <span class="s2">&quot;And what does that tell you?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>            <span class="s2">&quot;How does that make you feel?&quot;</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>        <span class="p">]),</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>        <span class="c1"># Direct statements about Eliza - Turn it around</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\byou are (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>            <span class="s2">&quot;Why are you interested in whether I am </span><span class="si">{0}</span><span class="s2"> or not?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>            <span class="s2">&quot;Would you prefer if I were not </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>            <span class="s2">&quot;Perhaps I am </span><span class="si">{0}</span><span class="s2"> in your fantasies.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>            <span class="s2">&quot;Do you sometimes think I am </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>        <span class="p">]),</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>        <span class="c1"># General &quot;you&quot; statements - Deflect to patient</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>        <span class="p">(</span><span class="sa">r</span><span class="s1">&#39;.*\byou (.*)&#39;</span><span class="p">,</span> <span class="p">[</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>            <span class="s2">&quot;We should be discussing you, not me.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-238" name="__codelineno-0-238"></a>            <span class="s2">&quot;Oh, I </span><span class="si">{0}</span><span class="s2">?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-239" name="__codelineno-0-239"></a>            <span class="s2">&quot;You&#39;re not really talking about me, are you?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-240" name="__codelineno-0-240"></a>            <span class="s2">&quot;What makes you think I </span><span class="si">{0}</span><span class="s2">?&quot;</span>
<a id="__codelineno-0-241" name="__codelineno-0-241"></a>        <span class="p">])</span>
<a id="__codelineno-0-242" name="__codelineno-0-242"></a>    <span class="p">]</span>
<a id="__codelineno-0-243" name="__codelineno-0-243"></a>
<a id="__codelineno-0-244" name="__codelineno-0-244"></a>    <span class="c1"># ü§∑‚Äç‚ôÄÔ∏è Default responses - When all else fails, be vague!</span>
<a id="__codelineno-0-245" name="__codelineno-0-245"></a>    <span class="c1"># These are the therapy equivalent of &quot;turn it off and on again&quot;</span>
<a id="__codelineno-0-246" name="__codelineno-0-246"></a>    <span class="bp">self</span><span class="o">.</span><span class="n">default_responses</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-247" name="__codelineno-0-247"></a>        <span class="s2">&quot;Please tell me more.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-248" name="__codelineno-0-248"></a>        <span class="s2">&quot;Let&#39;s change focus a bit... Tell me about your family.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-249" name="__codelineno-0-249"></a>        <span class="s2">&quot;Can you elaborate on that?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-250" name="__codelineno-0-250"></a>        <span class="s2">&quot;Why do you say that?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-251" name="__codelineno-0-251"></a>        <span class="s2">&quot;I see.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-252" name="__codelineno-0-252"></a>        <span class="s2">&quot;Very interesting.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-253" name="__codelineno-0-253"></a>        <span class="s2">&quot;I see.  And what does that tell you?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-254" name="__codelineno-0-254"></a>        <span class="s2">&quot;How does that make you feel?&quot;</span><span class="p">,</span>
<a id="__codelineno-0-255" name="__codelineno-0-255"></a>        <span class="s2">&quot;Do you feel strongly about discussing such things?&quot;</span>
<a id="__codelineno-0-256" name="__codelineno-0-256"></a>    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="utils.eliza.Eliza.__reflect" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">__reflect</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">__reflect</span><span class="p">(</span><span class="n">text_fragment</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>ü™û The magic mirror - reflect pronouns back to the user.</p>
<p>This is where the therapeutic magic happens! Eliza takes what you
said and reflects it back by swapping pronouns and perspective.
"I am sad" becomes "you are sad", creating the illusion that
she's really listening and understanding.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text_fragment</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The text to reflect back</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The reflected text with pronouns swapped</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>eliza = Eliza()
eliza._Eliza__reflect("I am feeling happy")
"you are feeling happy"</p>
</blockquote>
</blockquote>
</blockquote>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>This method preserves punctuation while doing the reflection,
because even AI therapists should have good grammar! ‚ú®</p>
</details>

            <details class="quote">
              <summary>Source code in <code>utils/eliza.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-258">258</a></span>
<span class="normal"><a href="#__codelineno-0-259">259</a></span>
<span class="normal"><a href="#__codelineno-0-260">260</a></span>
<span class="normal"><a href="#__codelineno-0-261">261</a></span>
<span class="normal"><a href="#__codelineno-0-262">262</a></span>
<span class="normal"><a href="#__codelineno-0-263">263</a></span>
<span class="normal"><a href="#__codelineno-0-264">264</a></span>
<span class="normal"><a href="#__codelineno-0-265">265</a></span>
<span class="normal"><a href="#__codelineno-0-266">266</a></span>
<span class="normal"><a href="#__codelineno-0-267">267</a></span>
<span class="normal"><a href="#__codelineno-0-268">268</a></span>
<span class="normal"><a href="#__codelineno-0-269">269</a></span>
<span class="normal"><a href="#__codelineno-0-270">270</a></span>
<span class="normal"><a href="#__codelineno-0-271">271</a></span>
<span class="normal"><a href="#__codelineno-0-272">272</a></span>
<span class="normal"><a href="#__codelineno-0-273">273</a></span>
<span class="normal"><a href="#__codelineno-0-274">274</a></span>
<span class="normal"><a href="#__codelineno-0-275">275</a></span>
<span class="normal"><a href="#__codelineno-0-276">276</a></span>
<span class="normal"><a href="#__codelineno-0-277">277</a></span>
<span class="normal"><a href="#__codelineno-0-278">278</a></span>
<span class="normal"><a href="#__codelineno-0-279">279</a></span>
<span class="normal"><a href="#__codelineno-0-280">280</a></span>
<span class="normal"><a href="#__codelineno-0-281">281</a></span>
<span class="normal"><a href="#__codelineno-0-282">282</a></span>
<span class="normal"><a href="#__codelineno-0-283">283</a></span>
<span class="normal"><a href="#__codelineno-0-284">284</a></span>
<span class="normal"><a href="#__codelineno-0-285">285</a></span>
<span class="normal"><a href="#__codelineno-0-286">286</a></span>
<span class="normal"><a href="#__codelineno-0-287">287</a></span>
<span class="normal"><a href="#__codelineno-0-288">288</a></span>
<span class="normal"><a href="#__codelineno-0-289">289</a></span>
<span class="normal"><a href="#__codelineno-0-290">290</a></span>
<span class="normal"><a href="#__codelineno-0-291">291</a></span>
<span class="normal"><a href="#__codelineno-0-292">292</a></span>
<span class="normal"><a href="#__codelineno-0-293">293</a></span>
<span class="normal"><a href="#__codelineno-0-294">294</a></span>
<span class="normal"><a href="#__codelineno-0-295">295</a></span>
<span class="normal"><a href="#__codelineno-0-296">296</a></span>
<span class="normal"><a href="#__codelineno-0-297">297</a></span>
<span class="normal"><a href="#__codelineno-0-298">298</a></span>
<span class="normal"><a href="#__codelineno-0-299">299</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-258" name="__codelineno-0-258"></a><span class="k">def</span><span class="w"> </span><span class="nf">__reflect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text_fragment</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<a id="__codelineno-0-259" name="__codelineno-0-259"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-260" name="__codelineno-0-260"></a><span class="sd">    ü™û The magic mirror - reflect pronouns back to the user.</span>
<a id="__codelineno-0-261" name="__codelineno-0-261"></a>
<a id="__codelineno-0-262" name="__codelineno-0-262"></a><span class="sd">    This is where the therapeutic magic happens! Eliza takes what you</span>
<a id="__codelineno-0-263" name="__codelineno-0-263"></a><span class="sd">    said and reflects it back by swapping pronouns and perspective.</span>
<a id="__codelineno-0-264" name="__codelineno-0-264"></a><span class="sd">    &quot;I am sad&quot; becomes &quot;you are sad&quot;, creating the illusion that</span>
<a id="__codelineno-0-265" name="__codelineno-0-265"></a><span class="sd">    she&#39;s really listening and understanding.</span>
<a id="__codelineno-0-266" name="__codelineno-0-266"></a>
<a id="__codelineno-0-267" name="__codelineno-0-267"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-268" name="__codelineno-0-268"></a><span class="sd">        text_fragment (str): The text to reflect back</span>
<a id="__codelineno-0-269" name="__codelineno-0-269"></a>
<a id="__codelineno-0-270" name="__codelineno-0-270"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-271" name="__codelineno-0-271"></a><span class="sd">        str: The reflected text with pronouns swapped</span>
<a id="__codelineno-0-272" name="__codelineno-0-272"></a>
<a id="__codelineno-0-273" name="__codelineno-0-273"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-274" name="__codelineno-0-274"></a><span class="sd">        &gt;&gt;&gt; eliza = Eliza()</span>
<a id="__codelineno-0-275" name="__codelineno-0-275"></a><span class="sd">        &gt;&gt;&gt; eliza._Eliza__reflect(&quot;I am feeling happy&quot;)</span>
<a id="__codelineno-0-276" name="__codelineno-0-276"></a><span class="sd">        &quot;you are feeling happy&quot;</span>
<a id="__codelineno-0-277" name="__codelineno-0-277"></a>
<a id="__codelineno-0-278" name="__codelineno-0-278"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-279" name="__codelineno-0-279"></a><span class="sd">        This method preserves punctuation while doing the reflection,</span>
<a id="__codelineno-0-280" name="__codelineno-0-280"></a><span class="sd">        because even AI therapists should have good grammar! ‚ú®</span>
<a id="__codelineno-0-281" name="__codelineno-0-281"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-282" name="__codelineno-0-282"></a>    <span class="c1"># Split into individual words for processing</span>
<a id="__codelineno-0-283" name="__codelineno-0-283"></a>    <span class="n">word_tokens</span> <span class="o">=</span> <span class="n">text_fragment</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<a id="__codelineno-0-284" name="__codelineno-0-284"></a>    <span class="n">reflected_words</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-0-285" name="__codelineno-0-285"></a>
<a id="__codelineno-0-286" name="__codelineno-0-286"></a>    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">word_tokens</span><span class="p">:</span>
<a id="__codelineno-0-287" name="__codelineno-0-287"></a>        <span class="c1"># Separate the actual word from any punctuation</span>
<a id="__codelineno-0-288" name="__codelineno-0-288"></a>        <span class="n">clean_word</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^\w]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span>
<a id="__codelineno-0-289" name="__codelineno-0-289"></a>        <span class="n">punctuation</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">clean_word</span><span class="p">):]</span>
<a id="__codelineno-0-290" name="__codelineno-0-290"></a>
<a id="__codelineno-0-291" name="__codelineno-0-291"></a>        <span class="c1"># Apply reflection if we know how to transform this word</span>
<a id="__codelineno-0-292" name="__codelineno-0-292"></a>        <span class="k">if</span> <span class="n">clean_word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span><span class="p">:</span>
<a id="__codelineno-0-293" name="__codelineno-0-293"></a>            <span class="n">reflected_word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reflections</span><span class="p">[</span><span class="n">clean_word</span><span class="p">]</span> <span class="o">+</span> <span class="n">punctuation</span>
<a id="__codelineno-0-294" name="__codelineno-0-294"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-295" name="__codelineno-0-295"></a>            <span class="n">reflected_word</span> <span class="o">=</span> <span class="n">word</span>
<a id="__codelineno-0-296" name="__codelineno-0-296"></a>
<a id="__codelineno-0-297" name="__codelineno-0-297"></a>        <span class="n">reflected_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reflected_word</span><span class="p">)</span>
<a id="__codelineno-0-298" name="__codelineno-0-298"></a>
<a id="__codelineno-0-299" name="__codelineno-0-299"></a>    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">reflected_words</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="utils.eliza.Eliza.reply" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">reply</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">reply</span><span class="p">(</span><span class="n">user_message</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>üí≠ Generate a therapeutic response to the user's message.</p>
<p>This is Eliza's main brain function! She analyzes what you said,
tries to match it against her patterns, and responds with something
that sounds like she actually cares (spoiler: she doesn't, but
she's very good at pretending).</p>
<p>Process:
1. Check if it's a goodbye message first
2. Try to match against therapeutic patterns
3. If pattern matches and has groups, reflect them back
4. If no patterns match, use a generic response
5. Add some randomness to keep things interesting</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>user_message</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>What the human said to Eliza</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Reply</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Reply


  
      dataclass
   (utils.eliza.Reply)" href="#utils.eliza.Reply">Reply</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Eliza's thoughtful (or generic) response</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Examples:</span></p>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">eliza</span> <span class="o">=</span> <span class="n">Eliza</span><span class="p">()</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">reply</span> <span class="o">=</span> <span class="n">eliza</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s2">&quot;I am feeling sad&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">reply</span><span class="o">.</span><span class="n">text</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="go">&quot;Did you come to me because you are feeling sad?&quot;</span>
</code></pre></div>
    <div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">reply</span> <span class="o">=</span> <span class="n">eliza</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s2">&quot;goodbye&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="gp">&gt;&gt;&gt; </span><span class="n">reply</span><span class="o">.</span><span class="n">goodbye</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="go">True</span>
</code></pre></div>


<details class="note" open>
  <summary>Note</summary>
  <p>Empty messages get a gentle nudge to actually say something.
Even AI therapists need something to work with! ü§∑‚Äç‚ôÄÔ∏è</p>
</details>

            <details class="quote">
              <summary>Source code in <code>utils/eliza.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-301">301</a></span>
<span class="normal"><a href="#__codelineno-0-302">302</a></span>
<span class="normal"><a href="#__codelineno-0-303">303</a></span>
<span class="normal"><a href="#__codelineno-0-304">304</a></span>
<span class="normal"><a href="#__codelineno-0-305">305</a></span>
<span class="normal"><a href="#__codelineno-0-306">306</a></span>
<span class="normal"><a href="#__codelineno-0-307">307</a></span>
<span class="normal"><a href="#__codelineno-0-308">308</a></span>
<span class="normal"><a href="#__codelineno-0-309">309</a></span>
<span class="normal"><a href="#__codelineno-0-310">310</a></span>
<span class="normal"><a href="#__codelineno-0-311">311</a></span>
<span class="normal"><a href="#__codelineno-0-312">312</a></span>
<span class="normal"><a href="#__codelineno-0-313">313</a></span>
<span class="normal"><a href="#__codelineno-0-314">314</a></span>
<span class="normal"><a href="#__codelineno-0-315">315</a></span>
<span class="normal"><a href="#__codelineno-0-316">316</a></span>
<span class="normal"><a href="#__codelineno-0-317">317</a></span>
<span class="normal"><a href="#__codelineno-0-318">318</a></span>
<span class="normal"><a href="#__codelineno-0-319">319</a></span>
<span class="normal"><a href="#__codelineno-0-320">320</a></span>
<span class="normal"><a href="#__codelineno-0-321">321</a></span>
<span class="normal"><a href="#__codelineno-0-322">322</a></span>
<span class="normal"><a href="#__codelineno-0-323">323</a></span>
<span class="normal"><a href="#__codelineno-0-324">324</a></span>
<span class="normal"><a href="#__codelineno-0-325">325</a></span>
<span class="normal"><a href="#__codelineno-0-326">326</a></span>
<span class="normal"><a href="#__codelineno-0-327">327</a></span>
<span class="normal"><a href="#__codelineno-0-328">328</a></span>
<span class="normal"><a href="#__codelineno-0-329">329</a></span>
<span class="normal"><a href="#__codelineno-0-330">330</a></span>
<span class="normal"><a href="#__codelineno-0-331">331</a></span>
<span class="normal"><a href="#__codelineno-0-332">332</a></span>
<span class="normal"><a href="#__codelineno-0-333">333</a></span>
<span class="normal"><a href="#__codelineno-0-334">334</a></span>
<span class="normal"><a href="#__codelineno-0-335">335</a></span>
<span class="normal"><a href="#__codelineno-0-336">336</a></span>
<span class="normal"><a href="#__codelineno-0-337">337</a></span>
<span class="normal"><a href="#__codelineno-0-338">338</a></span>
<span class="normal"><a href="#__codelineno-0-339">339</a></span>
<span class="normal"><a href="#__codelineno-0-340">340</a></span>
<span class="normal"><a href="#__codelineno-0-341">341</a></span>
<span class="normal"><a href="#__codelineno-0-342">342</a></span>
<span class="normal"><a href="#__codelineno-0-343">343</a></span>
<span class="normal"><a href="#__codelineno-0-344">344</a></span>
<span class="normal"><a href="#__codelineno-0-345">345</a></span>
<span class="normal"><a href="#__codelineno-0-346">346</a></span>
<span class="normal"><a href="#__codelineno-0-347">347</a></span>
<span class="normal"><a href="#__codelineno-0-348">348</a></span>
<span class="normal"><a href="#__codelineno-0-349">349</a></span>
<span class="normal"><a href="#__codelineno-0-350">350</a></span>
<span class="normal"><a href="#__codelineno-0-351">351</a></span>
<span class="normal"><a href="#__codelineno-0-352">352</a></span>
<span class="normal"><a href="#__codelineno-0-353">353</a></span>
<span class="normal"><a href="#__codelineno-0-354">354</a></span>
<span class="normal"><a href="#__codelineno-0-355">355</a></span>
<span class="normal"><a href="#__codelineno-0-356">356</a></span>
<span class="normal"><a href="#__codelineno-0-357">357</a></span>
<span class="normal"><a href="#__codelineno-0-358">358</a></span>
<span class="normal"><a href="#__codelineno-0-359">359</a></span>
<span class="normal"><a href="#__codelineno-0-360">360</a></span>
<span class="normal"><a href="#__codelineno-0-361">361</a></span>
<span class="normal"><a href="#__codelineno-0-362">362</a></span>
<span class="normal"><a href="#__codelineno-0-363">363</a></span>
<span class="normal"><a href="#__codelineno-0-364">364</a></span>
<span class="normal"><a href="#__codelineno-0-365">365</a></span>
<span class="normal"><a href="#__codelineno-0-366">366</a></span>
<span class="normal"><a href="#__codelineno-0-367">367</a></span>
<span class="normal"><a href="#__codelineno-0-368">368</a></span>
<span class="normal"><a href="#__codelineno-0-369">369</a></span>
<span class="normal"><a href="#__codelineno-0-370">370</a></span>
<span class="normal"><a href="#__codelineno-0-371">371</a></span>
<span class="normal"><a href="#__codelineno-0-372">372</a></span>
<span class="normal"><a href="#__codelineno-0-373">373</a></span>
<span class="normal"><a href="#__codelineno-0-374">374</a></span>
<span class="normal"><a href="#__codelineno-0-375">375</a></span>
<span class="normal"><a href="#__codelineno-0-376">376</a></span>
<span class="normal"><a href="#__codelineno-0-377">377</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-301" name="__codelineno-0-301"></a><span class="k">def</span><span class="w"> </span><span class="nf">reply</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_message</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Reply</span><span class="p">:</span>
<a id="__codelineno-0-302" name="__codelineno-0-302"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-303" name="__codelineno-0-303"></a><span class="sd">    üí≠ Generate a therapeutic response to the user&#39;s message.</span>
<a id="__codelineno-0-304" name="__codelineno-0-304"></a>
<a id="__codelineno-0-305" name="__codelineno-0-305"></a><span class="sd">    This is Eliza&#39;s main brain function! She analyzes what you said,</span>
<a id="__codelineno-0-306" name="__codelineno-0-306"></a><span class="sd">    tries to match it against her patterns, and responds with something</span>
<a id="__codelineno-0-307" name="__codelineno-0-307"></a><span class="sd">    that sounds like she actually cares (spoiler: she doesn&#39;t, but</span>
<a id="__codelineno-0-308" name="__codelineno-0-308"></a><span class="sd">    she&#39;s very good at pretending).</span>
<a id="__codelineno-0-309" name="__codelineno-0-309"></a>
<a id="__codelineno-0-310" name="__codelineno-0-310"></a><span class="sd">    Process:</span>
<a id="__codelineno-0-311" name="__codelineno-0-311"></a><span class="sd">    1. Check if it&#39;s a goodbye message first</span>
<a id="__codelineno-0-312" name="__codelineno-0-312"></a><span class="sd">    2. Try to match against therapeutic patterns</span>
<a id="__codelineno-0-313" name="__codelineno-0-313"></a><span class="sd">    3. If pattern matches and has groups, reflect them back</span>
<a id="__codelineno-0-314" name="__codelineno-0-314"></a><span class="sd">    4. If no patterns match, use a generic response</span>
<a id="__codelineno-0-315" name="__codelineno-0-315"></a><span class="sd">    5. Add some randomness to keep things interesting</span>
<a id="__codelineno-0-316" name="__codelineno-0-316"></a>
<a id="__codelineno-0-317" name="__codelineno-0-317"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-318" name="__codelineno-0-318"></a><span class="sd">        user_message (str): What the human said to Eliza</span>
<a id="__codelineno-0-319" name="__codelineno-0-319"></a>
<a id="__codelineno-0-320" name="__codelineno-0-320"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-321" name="__codelineno-0-321"></a><span class="sd">        Reply: Eliza&#39;s thoughtful (or generic) response</span>
<a id="__codelineno-0-322" name="__codelineno-0-322"></a>
<a id="__codelineno-0-323" name="__codelineno-0-323"></a><span class="sd">    Examples:</span>
<a id="__codelineno-0-324" name="__codelineno-0-324"></a><span class="sd">        &gt;&gt;&gt; eliza = Eliza()</span>
<a id="__codelineno-0-325" name="__codelineno-0-325"></a><span class="sd">        &gt;&gt;&gt; reply = eliza.reply(&quot;I am feeling sad&quot;)</span>
<a id="__codelineno-0-326" name="__codelineno-0-326"></a><span class="sd">        &gt;&gt;&gt; reply.text</span>
<a id="__codelineno-0-327" name="__codelineno-0-327"></a><span class="sd">        &quot;Did you come to me because you are feeling sad?&quot;</span>
<a id="__codelineno-0-328" name="__codelineno-0-328"></a>
<a id="__codelineno-0-329" name="__codelineno-0-329"></a><span class="sd">        &gt;&gt;&gt; reply = eliza.reply(&quot;goodbye&quot;)</span>
<a id="__codelineno-0-330" name="__codelineno-0-330"></a><span class="sd">        &gt;&gt;&gt; reply.goodbye</span>
<a id="__codelineno-0-331" name="__codelineno-0-331"></a><span class="sd">        True</span>
<a id="__codelineno-0-332" name="__codelineno-0-332"></a>
<a id="__codelineno-0-333" name="__codelineno-0-333"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-334" name="__codelineno-0-334"></a><span class="sd">        Empty messages get a gentle nudge to actually say something.</span>
<a id="__codelineno-0-335" name="__codelineno-0-335"></a><span class="sd">        Even AI therapists need something to work with! ü§∑‚Äç‚ôÄÔ∏è</span>
<a id="__codelineno-0-336" name="__codelineno-0-336"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-337" name="__codelineno-0-337"></a>    <span class="c1"># Handle empty or whitespace-only input</span>
<a id="__codelineno-0-338" name="__codelineno-0-338"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">user_message</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
<a id="__codelineno-0-339" name="__codelineno-0-339"></a>        <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="s2">&quot;Please say something.&quot;</span><span class="p">)</span>
<a id="__codelineno-0-340" name="__codelineno-0-340"></a>
<a id="__codelineno-0-341" name="__codelineno-0-341"></a>    <span class="c1"># Convert to lowercase for easier pattern matching</span>
<a id="__codelineno-0-342" name="__codelineno-0-342"></a>    <span class="n">lowercase_input</span> <span class="o">=</span> <span class="n">user_message</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<a id="__codelineno-0-343" name="__codelineno-0-343"></a>
<a id="__codelineno-0-344" name="__codelineno-0-344"></a>    <span class="c1"># üëã First priority: Check for goodbye patterns</span>
<a id="__codelineno-0-345" name="__codelineno-0-345"></a>    <span class="k">for</span> <span class="n">goodbye_pattern</span><span class="p">,</span> <span class="n">goodbye_responses</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">goodbye_patterns</span><span class="p">:</span>
<a id="__codelineno-0-346" name="__codelineno-0-346"></a>        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">goodbye_pattern</span><span class="p">,</span> <span class="n">lowercase_input</span><span class="p">):</span>
<a id="__codelineno-0-347" name="__codelineno-0-347"></a>            <span class="n">farewell_message</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">goodbye_responses</span><span class="p">)</span>
<a id="__codelineno-0-348" name="__codelineno-0-348"></a>            <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">farewell_message</span><span class="p">,</span> <span class="n">goodbye</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<a id="__codelineno-0-349" name="__codelineno-0-349"></a>
<a id="__codelineno-0-350" name="__codelineno-0-350"></a>    <span class="c1"># üéØ Try to match therapeutic patterns</span>
<a id="__codelineno-0-351" name="__codelineno-0-351"></a>    <span class="k">for</span> <span class="n">pattern_regex</span><span class="p">,</span> <span class="n">response_templates</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">patterns</span><span class="p">:</span>
<a id="__codelineno-0-352" name="__codelineno-0-352"></a>        <span class="n">pattern_match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern_regex</span><span class="p">,</span> <span class="n">lowercase_input</span><span class="p">)</span>
<a id="__codelineno-0-353" name="__codelineno-0-353"></a>        <span class="k">if</span> <span class="n">pattern_match</span><span class="p">:</span>
<a id="__codelineno-0-354" name="__codelineno-0-354"></a>            <span class="c1"># Pick a random response template from this pattern</span>
<a id="__codelineno-0-355" name="__codelineno-0-355"></a>            <span class="n">chosen_response</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">response_templates</span><span class="p">)</span>
<a id="__codelineno-0-356" name="__codelineno-0-356"></a>
<a id="__codelineno-0-357" name="__codelineno-0-357"></a>            <span class="c1"># If the pattern captured groups, reflect and substitute them</span>
<a id="__codelineno-0-358" name="__codelineno-0-358"></a>            <span class="k">if</span> <span class="n">pattern_match</span><span class="o">.</span><span class="n">groups</span><span class="p">():</span>
<a id="__codelineno-0-359" name="__codelineno-0-359"></a>                <span class="n">reflected_groups</span> <span class="o">=</span> <span class="p">[</span>
<a id="__codelineno-0-360" name="__codelineno-0-360"></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">__reflect</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">pattern_match</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
<a id="__codelineno-0-361" name="__codelineno-0-361"></a>                <span class="p">]</span>
<a id="__codelineno-0-362" name="__codelineno-0-362"></a>                <span class="k">try</span><span class="p">:</span>
<a id="__codelineno-0-363" name="__codelineno-0-363"></a>                    <span class="c1"># Try to format the response with reflected text</span>
<a id="__codelineno-0-364" name="__codelineno-0-364"></a>                    <span class="n">personalized_response</span> <span class="o">=</span> <span class="n">chosen_response</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">reflected_groups</span><span class="p">)</span>
<a id="__codelineno-0-365" name="__codelineno-0-365"></a>                    <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">personalized_response</span><span class="p">)</span>
<a id="__codelineno-0-366" name="__codelineno-0-366"></a>                <span class="k">except</span> <span class="p">(</span><span class="ne">IndexError</span><span class="p">,</span> <span class="ne">KeyError</span><span class="p">):</span>
<a id="__codelineno-0-367" name="__codelineno-0-367"></a>                    <span class="c1"># If formatting fails, just return the template as-is</span>
<a id="__codelineno-0-368" name="__codelineno-0-368"></a>                    <span class="c1"># (Sometimes the best therapy is keeping it simple)</span>
<a id="__codelineno-0-369" name="__codelineno-0-369"></a>                    <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">chosen_response</span><span class="p">)</span>
<a id="__codelineno-0-370" name="__codelineno-0-370"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-371" name="__codelineno-0-371"></a>                <span class="c1"># No captured groups, just return the response</span>
<a id="__codelineno-0-372" name="__codelineno-0-372"></a>                <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">chosen_response</span><span class="p">)</span>
<a id="__codelineno-0-373" name="__codelineno-0-373"></a>
<a id="__codelineno-0-374" name="__codelineno-0-374"></a>    <span class="c1"># ü§∑‚Äç‚ôÄÔ∏è No patterns matched - time for a generic response</span>
<a id="__codelineno-0-375" name="__codelineno-0-375"></a>    <span class="c1"># This is Eliza&#39;s equivalent of nodding thoughtfully</span>
<a id="__codelineno-0-376" name="__codelineno-0-376"></a>    <span class="n">fallback_response</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_responses</span><span class="p">)</span>
<a id="__codelineno-0-377" name="__codelineno-0-377"></a>    <span class="k">return</span> <span class="n">Reply</span><span class="p">(</span><span class="n">fallback_response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h4 id="utils.eliza.Reply" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Reply</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">


        <p>üí¨ A thoughtful response from our AI therapist.</p>
<p>This dataclass encapsulates Eliza's responses, including both the
actual text and whether it's time to say goodbye. Because even
AI therapists need to end sessions eventually!</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="utils.eliza.Reply.text">text</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The wise words from Eliza</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="utils.eliza.Reply.goodbye">goodbye</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if this response ends the conversation</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>reply = Reply("How does that make you feel?", False)
reply.text
"How does that make you feel?"
reply.is_goodbye()
False</p>
</blockquote>
</blockquote>
</blockquote>
</details>







              <details class="quote">
                <summary>Source code in <code>utils/eliza.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="nd">@dataclass</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="k">class</span><span class="w"> </span><span class="nc">Reply</span><span class="p">:</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="sd">    üí¨ A thoughtful response from our AI therapist.</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="sd">    This dataclass encapsulates Eliza&#39;s responses, including both the</span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="sd">    actual text and whether it&#39;s time to say goodbye. Because even</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="sd">    AI therapists need to end sessions eventually!</span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="sd">    Attributes:</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="sd">        text (str): The wise words from Eliza</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">        goodbye (bool): True if this response ends the conversation</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="sd">        &gt;&gt;&gt; reply = Reply(&quot;How does that make you feel?&quot;, False)</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">        &gt;&gt;&gt; reply.text</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">        &quot;How does that make you feel?&quot;</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">        &gt;&gt;&gt; reply.is_goodbye()</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">        False</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="n">goodbye</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">is_goodbye</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">        üö™ Check if it&#39;s time to end the therapy session.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">            bool: True if this reply indicates the conversation should end</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">            This is just a convenience method because sometimes calling</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">            reply.is_goodbye() feels more natural than reply.goodbye! ü§∑‚Äç‚ôÄÔ∏è</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">goodbye</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">








<h5 id="utils.eliza.Reply-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="utils.eliza.Reply.is_goodbye" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">is_goodbye</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">is_goodbye</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>üö™ Check if it's time to end the therapy session.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if this reply indicates the conversation should end</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Note</summary>
  <p>This is just a convenience method because sometimes calling
reply.is_goodbye() feels more natural than reply.goodbye! ü§∑‚Äç‚ôÄÔ∏è</p>
</details>

            <details class="quote">
              <summary>Source code in <code>utils/eliza.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="k">def</span><span class="w"> </span><span class="nf">is_goodbye</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="sd">    üö™ Check if it&#39;s time to end the therapy session.</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="sd">        bool: True if this reply indicates the conversation should end</span>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">        This is just a convenience method because sometimes calling</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">        reply.is_goodbye() feels more natural than reply.goodbye! ü§∑‚Äç‚ôÄÔ∏è</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a>    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">goodbye</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.highlight", "search.share", "content.code.copy", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>