
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A modern Python gRPC service with streaming, async, and CloudEvents">
      
      
        <meta name="author" content="The gRPC Service Squad">
      
      
        <link rel="canonical" href="https://soundphilosopher.github.io/basic-grpc-service-python/reference/utils.some/">
      
      
        <link rel="prev" href="../utils.eliza/">
      
      
        <link rel="next" href="../../development/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>Utilities - 🚀 Basic gRPC Service Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e53b48f4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#utilities" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="🚀 Basic gRPC Service Documentation" class="md-header__button md-logo" aria-label="🚀 Basic gRPC Service Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            🚀 Basic gRPC Service Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Utilities
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/soundphilosopher/basic-grpc-service-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    basic-grpc-service-python
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../examples/" class="md-tabs__link">
        
  
  
    
  
  Examples

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../testing/" class="md-tabs__link">
        
  
  
    
  
  Testing

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../development/" class="md-tabs__link">
        
  
  
    
  
  Development

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="🚀 Basic gRPC Service Documentation" class="md-nav__button md-logo" aria-label="🚀 Basic gRPC Service Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    🚀 Basic gRPC Service Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/soundphilosopher/basic-grpc-service-python" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    basic-grpc-service-python
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../server/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../services.basic_service/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils.eliza/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Eliza Chatbot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#utils.some" class="md-nav__link">
    <span class="md-ellipsis">
      some
    </span>
  </a>
  
    <nav class="md-nav" aria-label="some">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.some-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.some.Some" class="md-nav__link">
    <span class="md-ellipsis">
      Some
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Some">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.some.Some-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.some.Some.build_background_response" class="md-nav__link">
    <span class="md-ellipsis">
      build_background_response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utils.some.Some.fake_service_response" class="md-nav__link">
    <span class="md-ellipsis">
      fake_service_response
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#utils.some" class="md-nav__link">
    <span class="md-ellipsis">
      some
    </span>
  </a>
  
    <nav class="md-nav" aria-label="some">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.some-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Classes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.some.Some" class="md-nav__link">
    <span class="md-ellipsis">
      Some
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Some">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.some.Some-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utils.some.Some.build_background_response" class="md-nav__link">
    <span class="md-ellipsis">
      build_background_response
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utils.some.Some.fake_service_response" class="md-nav__link">
    <span class="md-ellipsis">
      fake_service_response
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="utilities">Utilities</h1>
<blockquote>
<p>Helper functions for CloudEvents and service simulation</p>
</blockquote>


<div class="doc doc-object doc-module">



<h2 id="utils.some" class="doc doc-heading">
            <span class="doc doc-object-name doc-module-name">some</span>


</h2>

    <div class="doc doc-contents first">

        <p>🛠️ Some Utility - The Swiss Army Knife of gRPC Services</p>
<p>This module provides utility functions for building CloudEvent responses
and simulating service calls. Think of it as the helpful assistant that
handles all the boring but necessary stuff so your main service can focus
on being awesome! ⚡</p>
<p>Key Features:</p>
<ul>
<li>CloudEvent response building with proper formatting</li>
<li>Service call simulation with realistic delays</li>
<li>Timestamp conversion utilities for protobuf integration</li>
<li>Background task orchestration support</li>
</ul>
<p>The name "Some" might seem mysterious, but sometimes you just need "some"
utility functions to get the job done! 🔧</p>
<p>Author: The Utility Squad 🦸‍♀️🦸‍♂️</p>










  <div class="doc doc-children">







<h3 id="utils.some-classes">Classes</h3>

<div class="doc doc-object doc-class">



<h4 id="utils.some.Some" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Some</span>


</h4>


    <div class="doc doc-contents ">


        <p>🎭 The master of ceremonies for background operations and service simulation!</p>
<p>This utility class provides essential functions for:</p>
<ul>
<li>Building properly formatted CloudEvent responses</li>
<li>Simulating realistic service calls with delays</li>
<li>Converting between datetime formats and protobuf timestamps</li>
<li>Supporting the Background streaming service with progress updates</li>
</ul>
<p>Why "Some"? Because sometimes you need some help, and this class
provides some very useful functions! It's like having a reliable
friend who always knows how to format timestamps correctly. 👯‍♀️</p>








              <details class="quote">
                <summary>Source code in <code>utils/some.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span>
<span class="normal"><a href="#__codelineno-0-175">175</a></span>
<span class="normal"><a href="#__codelineno-0-176">176</a></span>
<span class="normal"><a href="#__codelineno-0-177">177</a></span>
<span class="normal"><a href="#__codelineno-0-178">178</a></span>
<span class="normal"><a href="#__codelineno-0-179">179</a></span>
<span class="normal"><a href="#__codelineno-0-180">180</a></span>
<span class="normal"><a href="#__codelineno-0-181">181</a></span>
<span class="normal"><a href="#__codelineno-0-182">182</a></span>
<span class="normal"><a href="#__codelineno-0-183">183</a></span>
<span class="normal"><a href="#__codelineno-0-184">184</a></span>
<span class="normal"><a href="#__codelineno-0-185">185</a></span>
<span class="normal"><a href="#__codelineno-0-186">186</a></span>
<span class="normal"><a href="#__codelineno-0-187">187</a></span>
<span class="normal"><a href="#__codelineno-0-188">188</a></span>
<span class="normal"><a href="#__codelineno-0-189">189</a></span>
<span class="normal"><a href="#__codelineno-0-190">190</a></span>
<span class="normal"><a href="#__codelineno-0-191">191</a></span>
<span class="normal"><a href="#__codelineno-0-192">192</a></span>
<span class="normal"><a href="#__codelineno-0-193">193</a></span>
<span class="normal"><a href="#__codelineno-0-194">194</a></span>
<span class="normal"><a href="#__codelineno-0-195">195</a></span>
<span class="normal"><a href="#__codelineno-0-196">196</a></span>
<span class="normal"><a href="#__codelineno-0-197">197</a></span>
<span class="normal"><a href="#__codelineno-0-198">198</a></span>
<span class="normal"><a href="#__codelineno-0-199">199</a></span>
<span class="normal"><a href="#__codelineno-0-200">200</a></span>
<span class="normal"><a href="#__codelineno-0-201">201</a></span>
<span class="normal"><a href="#__codelineno-0-202">202</a></span>
<span class="normal"><a href="#__codelineno-0-203">203</a></span>
<span class="normal"><a href="#__codelineno-0-204">204</a></span>
<span class="normal"><a href="#__codelineno-0-205">205</a></span>
<span class="normal"><a href="#__codelineno-0-206">206</a></span>
<span class="normal"><a href="#__codelineno-0-207">207</a></span>
<span class="normal"><a href="#__codelineno-0-208">208</a></span>
<span class="normal"><a href="#__codelineno-0-209">209</a></span>
<span class="normal"><a href="#__codelineno-0-210">210</a></span>
<span class="normal"><a href="#__codelineno-0-211">211</a></span>
<span class="normal"><a href="#__codelineno-0-212">212</a></span>
<span class="normal"><a href="#__codelineno-0-213">213</a></span>
<span class="normal"><a href="#__codelineno-0-214">214</a></span>
<span class="normal"><a href="#__codelineno-0-215">215</a></span>
<span class="normal"><a href="#__codelineno-0-216">216</a></span>
<span class="normal"><a href="#__codelineno-0-217">217</a></span>
<span class="normal"><a href="#__codelineno-0-218">218</a></span>
<span class="normal"><a href="#__codelineno-0-219">219</a></span>
<span class="normal"><a href="#__codelineno-0-220">220</a></span>
<span class="normal"><a href="#__codelineno-0-221">221</a></span>
<span class="normal"><a href="#__codelineno-0-222">222</a></span>
<span class="normal"><a href="#__codelineno-0-223">223</a></span>
<span class="normal"><a href="#__codelineno-0-224">224</a></span>
<span class="normal"><a href="#__codelineno-0-225">225</a></span>
<span class="normal"><a href="#__codelineno-0-226">226</a></span>
<span class="normal"><a href="#__codelineno-0-227">227</a></span>
<span class="normal"><a href="#__codelineno-0-228">228</a></span>
<span class="normal"><a href="#__codelineno-0-229">229</a></span>
<span class="normal"><a href="#__codelineno-0-230">230</a></span>
<span class="normal"><a href="#__codelineno-0-231">231</a></span>
<span class="normal"><a href="#__codelineno-0-232">232</a></span>
<span class="normal"><a href="#__codelineno-0-233">233</a></span>
<span class="normal"><a href="#__codelineno-0-234">234</a></span>
<span class="normal"><a href="#__codelineno-0-235">235</a></span>
<span class="normal"><a href="#__codelineno-0-236">236</a></span>
<span class="normal"><a href="#__codelineno-0-237">237</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="k">class</span><span class="w"> </span><span class="nc">Some</span><span class="p">:</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="sd">    🎭 The master of ceremonies for background operations and service simulation!</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="sd">    This utility class provides essential functions for:</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="sd">    - Building properly formatted CloudEvent responses</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="sd">    - Simulating realistic service calls with delays</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="sd">    - Converting between datetime formats and protobuf timestamps</span>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="sd">    - Supporting the Background streaming service with progress updates</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="sd">    Why &quot;Some&quot;? Because sometimes you need some help, and this class</span>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="sd">    provides some very useful functions! It&#39;s like having a reliable</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="sd">    friend who always knows how to format timestamps correctly. 👯‍♀️</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build_background_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">State</span><span class="p">,</span> <span class="n">started_at</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span> <span class="n">completed_at</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">],</span> <span class="n">responses</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">service_pb2</span><span class="o">.</span><span class="n">SomeServiceResponse</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">BackgroundResponse</span><span class="p">:</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">        🏗️ Construct a beautifully wrapped CloudEvent response for background operations.</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">        This method is the master builder for BackgroundResponse messages. It takes</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">        your raw response data and wraps it in a proper CloudEvent envelope with</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">        all the metadata bells and whistles. Because even background responses</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">        deserve to look professional! ✨</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">            state: The current state of the background operation (PROCESS/COMPLETE)</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">            started_at (datetime): When the background operation began</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">            completed_at (datetime, optional): When it completed (None if still running)</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">            responses (list): List of SomeServiceResponse messages collected so far</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">            service_pb2.BackgroundResponse: A properly formatted response with CloudEvent</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">        CloudEvent Details:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="sd">            - Unique UUID for each response (because every response is special)</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="sd">            - Source URN identifying this service</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="sd">            - CloudEvents v1.0 spec compliance</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="sd">            - Timestamp metadata for event tracking</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="sd">            - Protobuf payload with proper type information</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="sd">            &gt;&gt;&gt; some = Some()</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">            &gt;&gt;&gt; response = some.build_background_response(</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">            ...     state=service_pb2.State.STATE_PROCESS,</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="sd">            ...     started_at=datetime.now(timezone.utc),</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="sd">            ...     completed_at=None,</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="sd">            ...     responses=[]</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="sd">            ... )</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">            This method uses keyword-only arguments to prevent parameter mix-ups.</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">            Because nobody wants to accidentally pass completed_at as state! 🤦‍♀️</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>        <span class="c1"># Create the actual response payload with all the juicy details</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>        <span class="n">payload_event</span> <span class="o">=</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">BackgroundResponseEvent</span><span class="p">(</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>            <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>            <span class="n">started_at</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_ts</span><span class="p">(</span><span class="n">started_at</span><span class="p">),</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>            <span class="n">completed_at</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_ts</span><span class="p">(</span><span class="n">completed_at</span><span class="p">)</span> <span class="k">if</span> <span class="n">completed_at</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>            <span class="n">responses</span><span class="o">=</span><span class="n">responses</span><span class="p">,</span>  <span class="c1"># All the hard-earned results from our workers</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>        <span class="p">)</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>        <span class="c1"># Pack the payload into a protobuf Any message for maximum flexibility</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>        <span class="n">any_message</span> <span class="o">=</span> <span class="n">Any</span><span class="p">()</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>        <span class="n">any_message</span><span class="o">.</span><span class="n">Pack</span><span class="p">(</span><span class="n">payload_event</span><span class="p">)</span>  <span class="c1"># This sets the type_url automagically</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>        <span class="c1"># Create a timestamp for this exact moment in space-time</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>        <span class="n">current_timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_ts</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">))</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>        <span class="c1"># Wrap everything in a fancy CloudEvent envelope 📨</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>        <span class="n">cloud_event</span> <span class="o">=</span> <span class="n">CloudEvent</span><span class="p">(</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>            <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()),</span>  <span class="c1"># Every event deserves its own unique identity</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>            <span class="n">source</span><span class="o">=</span><span class="s2">&quot;urn:service:basic&quot;</span><span class="p">,</span>  <span class="c1"># Where this event came from</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>            <span class="n">spec_version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>  <span class="c1"># We follow the standards like good citizens</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>            <span class="nb">type</span><span class="o">=</span><span class="n">payload_event</span><span class="o">.</span><span class="n">DESCRIPTOR</span><span class="o">.</span><span class="n">full_name</span><span class="p">,</span>  <span class="c1"># Full protobuf message name</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>            <span class="n">attributes</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>                <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="n">CloudEvent</span><span class="o">.</span><span class="n">CloudEventAttributeValue</span><span class="p">(</span><span class="n">ce_timestamp</span><span class="o">=</span><span class="n">current_timestamp</span><span class="p">),</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>            <span class="p">},</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>            <span class="n">proto_data</span><span class="o">=</span><span class="n">any_message</span><span class="p">,</span>  <span class="c1"># The actual payload, safely packaged</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>        <span class="p">)</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>        <span class="k">return</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">BackgroundResponse</span><span class="p">(</span><span class="n">cloud_event</span><span class="o">=</span><span class="n">cloud_event</span><span class="p">)</span>
<a id="__codelineno-0-118" name="__codelineno-0-118"></a>
<a id="__codelineno-0-119" name="__codelineno-0-119"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">fake_service_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">protocol</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">SomeServiceResponse</span><span class="p">:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">        🎪 Simulate a realistic service call with all the drama of real networking!</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">        This method pretends to call an external service by sleeping for a random</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">        duration (because real services are unpredictable) and then returns a</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">        properly formatted response. It&#39;s like method acting for microservices! 🎭</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">        Perfect for:</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">        - Testing background processing patterns</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">        - Demonstrating concurrent service calls</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">        - Creating realistic delays in development</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">        - Impressing your colleagues with your attention to detail</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">            service_name (str): Name of the service being &quot;called&quot; (e.g., &quot;user-service&quot;)</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">            protocol (str): Protocol type (rest, grpc, mqtt, etc.)</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">            service_pb2.SomeServiceResponse: A realistic-looking service response</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">        Timing:</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">            Random delay between 1-3 seconds (because real services are moody)</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">        Response Format:</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">            - Unique UUID for tracking</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">            - Service name and version info</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">            - Protocol data wrapped in SomeServiceData</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">        Example:</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">            &gt;&gt;&gt; some = Some()</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">            &gt;&gt;&gt; response = some.fake_service_response(&quot;auth-service&quot;, &quot;grpc&quot;)</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">            &gt;&gt;&gt; response.name</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">            &quot;auth-service&quot;</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">            &gt;&gt;&gt; response.data.type</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">            &quot;protocol&quot;</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">            This method uses time.sleep() which blocks the thread! That&#39;s why</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">            the Background service calls it with asyncio.to_thread() to avoid</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">            blocking the event loop. Safety first! 🛡️</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>        <span class="c1"># Simulate realistic network delay (1-3 seconds of &quot;networking&quot;)</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>        <span class="n">_time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>        <span class="c1"># Create a realistic service response with all the proper fields</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>        <span class="k">return</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">SomeServiceResponse</span><span class="p">(</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>            <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()),</span>  <span class="c1"># Every response gets its own tracking ID</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>            <span class="n">name</span><span class="o">=</span><span class="n">service_name</span><span class="p">,</span>     <span class="c1"># The service we &quot;called&quot;</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>            <span class="n">version</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span><span class="p">,</span>          <span class="c1"># Always version your services, kids!</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>            <span class="n">data</span><span class="o">=</span><span class="n">service_pb2</span><span class="o">.</span><span class="n">SomeServiceData</span><span class="p">(</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>                <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">protocol</span><span class="p">),</span>  <span class="c1"># What protocol we &quot;used&quot;</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>                <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;protocol&quot;</span><span class="p">,</span>      <span class="c1"># Metadata about the data type</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>            <span class="p">),</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>        <span class="p">)</span>
<a id="__codelineno-0-175" name="__codelineno-0-175"></a>
<a id="__codelineno-0-176" name="__codelineno-0-176"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">_to_ts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">when</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">|</span><span class="nb">int</span><span class="o">|</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Timestamp</span><span class="p">:</span>
<a id="__codelineno-0-177" name="__codelineno-0-177"></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-178" name="__codelineno-0-178"></a><span class="sd">        ⏰ The time wizard - convert any time format to protobuf Timestamp!</span>
<a id="__codelineno-0-179" name="__codelineno-0-179"></a>
<a id="__codelineno-0-180" name="__codelineno-0-180"></a><span class="sd">        This utility method handles the annoying task of converting between</span>
<a id="__codelineno-0-181" name="__codelineno-0-181"></a><span class="sd">        Python datetime objects (and epoch seconds) to protobuf Timestamps.</span>
<a id="__codelineno-0-182" name="__codelineno-0-182"></a><span class="sd">        It&#39;s like a universal translator for time formats! 🌍</span>
<a id="__codelineno-0-183" name="__codelineno-0-183"></a>
<a id="__codelineno-0-184" name="__codelineno-0-184"></a><span class="sd">        Handles multiple input formats:</span>
<a id="__codelineno-0-185" name="__codelineno-0-185"></a>
<a id="__codelineno-0-186" name="__codelineno-0-186"></a><span class="sd">        - datetime objects (timezone-aware preferred)</span>
<a id="__codelineno-0-187" name="__codelineno-0-187"></a><span class="sd">        - Unix epoch seconds (int or float)</span>
<a id="__codelineno-0-188" name="__codelineno-0-188"></a><span class="sd">        - Automatically converts to UTC if needed</span>
<a id="__codelineno-0-189" name="__codelineno-0-189"></a>
<a id="__codelineno-0-190" name="__codelineno-0-190"></a><span class="sd">        Args:</span>
<a id="__codelineno-0-191" name="__codelineno-0-191"></a><span class="sd">            time_input: The time value to convert</span>
<a id="__codelineno-0-192" name="__codelineno-0-192"></a><span class="sd">                - datetime: Python datetime object</span>
<a id="__codelineno-0-193" name="__codelineno-0-193"></a><span class="sd">                - int/float: Unix epoch seconds</span>
<a id="__codelineno-0-194" name="__codelineno-0-194"></a><span class="sd">                - None: Returns None (for convenience)</span>
<a id="__codelineno-0-195" name="__codelineno-0-195"></a>
<a id="__codelineno-0-196" name="__codelineno-0-196"></a><span class="sd">        Returns:</span>
<a id="__codelineno-0-197" name="__codelineno-0-197"></a><span class="sd">            Timestamp: A properly formatted protobuf Timestamp</span>
<a id="__codelineno-0-198" name="__codelineno-0-198"></a>
<a id="__codelineno-0-199" name="__codelineno-0-199"></a><span class="sd">        Raises:</span>
<a id="__codelineno-0-200" name="__codelineno-0-200"></a><span class="sd">            TypeError: If the input type is not supported</span>
<a id="__codelineno-0-201" name="__codelineno-0-201"></a>
<a id="__codelineno-0-202" name="__codelineno-0-202"></a><span class="sd">        Examples:</span>
<a id="__codelineno-0-203" name="__codelineno-0-203"></a><span class="sd">            &gt;&gt;&gt; some = Some()</span>
<a id="__codelineno-0-204" name="__codelineno-0-204"></a><span class="sd">            &gt;&gt;&gt; now = datetime.now(timezone.utc)</span>
<a id="__codelineno-0-205" name="__codelineno-0-205"></a><span class="sd">            &gt;&gt;&gt; ts = some._to_ts(now)</span>
<a id="__codelineno-0-206" name="__codelineno-0-206"></a><span class="sd">            &gt;&gt;&gt; isinstance(ts, Timestamp)</span>
<a id="__codelineno-0-207" name="__codelineno-0-207"></a><span class="sd">            True</span>
<a id="__codelineno-0-208" name="__codelineno-0-208"></a>
<a id="__codelineno-0-209" name="__codelineno-0-209"></a><span class="sd">            &gt;&gt;&gt; epoch_ts = some._to_ts(1640995200.0)  # Unix epoch</span>
<a id="__codelineno-0-210" name="__codelineno-0-210"></a><span class="sd">            &gt;&gt;&gt; epoch_ts.seconds</span>
<a id="__codelineno-0-211" name="__codelineno-0-211"></a><span class="sd">            1640995200</span>
<a id="__codelineno-0-212" name="__codelineno-0-212"></a>
<a id="__codelineno-0-213" name="__codelineno-0-213"></a><span class="sd">        Time Zone Handling:</span>
<a id="__codelineno-0-214" name="__codelineno-0-214"></a><span class="sd">            - Naive datetime objects are assumed to be UTC</span>
<a id="__codelineno-0-215" name="__codelineno-0-215"></a><span class="sd">            - Timezone-aware objects are converted to UTC</span>
<a id="__codelineno-0-216" name="__codelineno-0-216"></a><span class="sd">            - UTC is the only truth in distributed systems! 🌐</span>
<a id="__codelineno-0-217" name="__codelineno-0-217"></a>
<a id="__codelineno-0-218" name="__codelineno-0-218"></a><span class="sd">        Note:</span>
<a id="__codelineno-0-219" name="__codelineno-0-219"></a><span class="sd">            The underscore prefix indicates this is a &quot;private&quot; method,</span>
<a id="__codelineno-0-220" name="__codelineno-0-220"></a><span class="sd">            but it&#39;s so useful that we document it anyway! 🤫</span>
<a id="__codelineno-0-221" name="__codelineno-0-221"></a><span class="sd">        &quot;&quot;&quot;</span>
<a id="__codelineno-0-222" name="__codelineno-0-222"></a>        <span class="n">ts</span> <span class="o">=</span> <span class="n">Timestamp</span><span class="p">()</span>
<a id="__codelineno-0-223" name="__codelineno-0-223"></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">when</span><span class="p">,</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
<a id="__codelineno-0-224" name="__codelineno-0-224"></a>            <span class="c1"># Ensure timezone-aware UTC</span>
<a id="__codelineno-0-225" name="__codelineno-0-225"></a>            <span class="k">if</span> <span class="n">when</span><span class="o">.</span><span class="n">tzinfo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
<a id="__codelineno-0-226" name="__codelineno-0-226"></a>                <span class="n">when</span> <span class="o">=</span> <span class="n">when</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
<a id="__codelineno-0-227" name="__codelineno-0-227"></a>            <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-228" name="__codelineno-0-228"></a>                <span class="n">when</span> <span class="o">=</span> <span class="n">when</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
<a id="__codelineno-0-229" name="__codelineno-0-229"></a>            <span class="n">ts</span><span class="o">.</span><span class="n">FromDatetime</span><span class="p">(</span><span class="n">when</span><span class="p">)</span>
<a id="__codelineno-0-230" name="__codelineno-0-230"></a>        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">when</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
<a id="__codelineno-0-231" name="__codelineno-0-231"></a>            <span class="n">seconds</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">when</span><span class="p">)</span>
<a id="__codelineno-0-232" name="__codelineno-0-232"></a>            <span class="n">nanos</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">when</span> <span class="o">-</span> <span class="n">seconds</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1_000_000_000</span><span class="p">)</span>
<a id="__codelineno-0-233" name="__codelineno-0-233"></a>            <span class="n">ts</span><span class="o">.</span><span class="n">seconds</span> <span class="o">=</span> <span class="n">seconds</span>
<a id="__codelineno-0-234" name="__codelineno-0-234"></a>            <span class="n">ts</span><span class="o">.</span><span class="n">nanos</span> <span class="o">=</span> <span class="n">nanos</span>
<a id="__codelineno-0-235" name="__codelineno-0-235"></a>        <span class="k">else</span><span class="p">:</span>
<a id="__codelineno-0-236" name="__codelineno-0-236"></a>            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;to_ts expects a datetime or epoch seconds (int/float)&quot;</span><span class="p">)</span>
<a id="__codelineno-0-237" name="__codelineno-0-237"></a>        <span class="k">return</span> <span class="n">ts</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">








<h5 id="utils.some.Some-functions">Functions</h5>

<div class="doc doc-object doc-function">


<h6 id="utils.some.Some.build_background_response" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">build_background_response</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">build_background_response</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">started_at</span><span class="p">,</span> <span class="n">completed_at</span><span class="p">,</span> <span class="n">responses</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>🏗️ Construct a beautifully wrapped CloudEvent response for background operations.</p>
<p>This method is the master builder for BackgroundResponse messages. It takes
your raw response data and wraps it in a proper CloudEvent envelope with
all the metadata bells and whistles. Because even background responses
deserve to look professional! ✨</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>state</code>
            </td>
            <td>
                  <code><span title="basic.service.v1.service_pb2.State">State</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The current state of the background operation (PROCESS/COMPLETE)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>started_at</code>
            </td>
            <td>
                  <code><span title="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When the background operation began</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>completed_at</code>
            </td>
            <td>
                  <code><span title="datetime">datetime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>When it completed (None if still running)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>responses</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of SomeServiceResponse messages collected so far</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="basic.service.v1.service_pb2.BackgroundResponse">BackgroundResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>service_pb2.BackgroundResponse: A properly formatted response with CloudEvent</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="cloudevent-details" open>
  <summary>CloudEvent Details</summary>
  <ul>
<li>Unique UUID for each response (because every response is special)</li>
<li>Source URN identifying this service</li>
<li>CloudEvents v1.0 spec compliance</li>
<li>Timestamp metadata for event tracking</li>
<li>Protobuf payload with proper type information</li>
</ul>
</details>

<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>some = Some()
response = some.build_background_response(
...     state=service_pb2.State.STATE_PROCESS,
...     started_at=datetime.now(timezone.utc),
...     completed_at=None,
...     responses=[]
... )</p>
</blockquote>
</blockquote>
</blockquote>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>This method uses keyword-only arguments to prevent parameter mix-ups.
Because nobody wants to accidentally pass completed_at as state! 🤦‍♀️</p>
</details>

            <details class="quote">
              <summary>Source code in <code>utils/some.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="k">def</span><span class="w"> </span><span class="nf">build_background_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">State</span><span class="p">,</span> <span class="n">started_at</span><span class="p">:</span> <span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span> <span class="n">completed_at</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="p">],</span> <span class="n">responses</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">service_pb2</span><span class="o">.</span><span class="n">SomeServiceResponse</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">BackgroundResponse</span><span class="p">:</span>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="sd">    🏗️ Construct a beautifully wrapped CloudEvent response for background operations.</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a>
<a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="sd">    This method is the master builder for BackgroundResponse messages. It takes</span>
<a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="sd">    your raw response data and wraps it in a proper CloudEvent envelope with</span>
<a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="sd">    all the metadata bells and whistles. Because even background responses</span>
<a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="sd">    deserve to look professional! ✨</span>
<a id="__codelineno-0-60" name="__codelineno-0-60"></a>
<a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="sd">        state: The current state of the background operation (PROCESS/COMPLETE)</span>
<a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="sd">        started_at (datetime): When the background operation began</span>
<a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="sd">        completed_at (datetime, optional): When it completed (None if still running)</span>
<a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="sd">        responses (list): List of SomeServiceResponse messages collected so far</span>
<a id="__codelineno-0-66" name="__codelineno-0-66"></a>
<a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="sd">        service_pb2.BackgroundResponse: A properly formatted response with CloudEvent</span>
<a id="__codelineno-0-69" name="__codelineno-0-69"></a>
<a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="sd">    CloudEvent Details:</span>
<a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="sd">        - Unique UUID for each response (because every response is special)</span>
<a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="sd">        - Source URN identifying this service</span>
<a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="sd">        - CloudEvents v1.0 spec compliance</span>
<a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="sd">        - Timestamp metadata for event tracking</span>
<a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="sd">        - Protobuf payload with proper type information</span>
<a id="__codelineno-0-76" name="__codelineno-0-76"></a>
<a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="sd">        &gt;&gt;&gt; some = Some()</span>
<a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="sd">        &gt;&gt;&gt; response = some.build_background_response(</span>
<a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="sd">        ...     state=service_pb2.State.STATE_PROCESS,</span>
<a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="sd">        ...     started_at=datetime.now(timezone.utc),</span>
<a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="sd">        ...     completed_at=None,</span>
<a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="sd">        ...     responses=[]</span>
<a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="sd">        ... )</span>
<a id="__codelineno-0-85" name="__codelineno-0-85"></a>
<a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="sd">        This method uses keyword-only arguments to prevent parameter mix-ups.</span>
<a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="sd">        Because nobody wants to accidentally pass completed_at as state! 🤦‍♀️</span>
<a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-90" name="__codelineno-0-90"></a>    <span class="c1"># Create the actual response payload with all the juicy details</span>
<a id="__codelineno-0-91" name="__codelineno-0-91"></a>    <span class="n">payload_event</span> <span class="o">=</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">BackgroundResponseEvent</span><span class="p">(</span>
<a id="__codelineno-0-92" name="__codelineno-0-92"></a>        <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
<a id="__codelineno-0-93" name="__codelineno-0-93"></a>        <span class="n">started_at</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_ts</span><span class="p">(</span><span class="n">started_at</span><span class="p">),</span>
<a id="__codelineno-0-94" name="__codelineno-0-94"></a>        <span class="n">completed_at</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_to_ts</span><span class="p">(</span><span class="n">completed_at</span><span class="p">)</span> <span class="k">if</span> <span class="n">completed_at</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
<a id="__codelineno-0-95" name="__codelineno-0-95"></a>        <span class="n">responses</span><span class="o">=</span><span class="n">responses</span><span class="p">,</span>  <span class="c1"># All the hard-earned results from our workers</span>
<a id="__codelineno-0-96" name="__codelineno-0-96"></a>    <span class="p">)</span>
<a id="__codelineno-0-97" name="__codelineno-0-97"></a>
<a id="__codelineno-0-98" name="__codelineno-0-98"></a>    <span class="c1"># Pack the payload into a protobuf Any message for maximum flexibility</span>
<a id="__codelineno-0-99" name="__codelineno-0-99"></a>    <span class="n">any_message</span> <span class="o">=</span> <span class="n">Any</span><span class="p">()</span>
<a id="__codelineno-0-100" name="__codelineno-0-100"></a>    <span class="n">any_message</span><span class="o">.</span><span class="n">Pack</span><span class="p">(</span><span class="n">payload_event</span><span class="p">)</span>  <span class="c1"># This sets the type_url automagically</span>
<a id="__codelineno-0-101" name="__codelineno-0-101"></a>
<a id="__codelineno-0-102" name="__codelineno-0-102"></a>    <span class="c1"># Create a timestamp for this exact moment in space-time</span>
<a id="__codelineno-0-103" name="__codelineno-0-103"></a>    <span class="n">current_timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_ts</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">dt</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">))</span>
<a id="__codelineno-0-104" name="__codelineno-0-104"></a>
<a id="__codelineno-0-105" name="__codelineno-0-105"></a>    <span class="c1"># Wrap everything in a fancy CloudEvent envelope 📨</span>
<a id="__codelineno-0-106" name="__codelineno-0-106"></a>    <span class="n">cloud_event</span> <span class="o">=</span> <span class="n">CloudEvent</span><span class="p">(</span>
<a id="__codelineno-0-107" name="__codelineno-0-107"></a>        <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()),</span>  <span class="c1"># Every event deserves its own unique identity</span>
<a id="__codelineno-0-108" name="__codelineno-0-108"></a>        <span class="n">source</span><span class="o">=</span><span class="s2">&quot;urn:service:basic&quot;</span><span class="p">,</span>  <span class="c1"># Where this event came from</span>
<a id="__codelineno-0-109" name="__codelineno-0-109"></a>        <span class="n">spec_version</span><span class="o">=</span><span class="s2">&quot;1.0&quot;</span><span class="p">,</span>  <span class="c1"># We follow the standards like good citizens</span>
<a id="__codelineno-0-110" name="__codelineno-0-110"></a>        <span class="nb">type</span><span class="o">=</span><span class="n">payload_event</span><span class="o">.</span><span class="n">DESCRIPTOR</span><span class="o">.</span><span class="n">full_name</span><span class="p">,</span>  <span class="c1"># Full protobuf message name</span>
<a id="__codelineno-0-111" name="__codelineno-0-111"></a>        <span class="n">attributes</span><span class="o">=</span><span class="p">{</span>
<a id="__codelineno-0-112" name="__codelineno-0-112"></a>            <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="n">CloudEvent</span><span class="o">.</span><span class="n">CloudEventAttributeValue</span><span class="p">(</span><span class="n">ce_timestamp</span><span class="o">=</span><span class="n">current_timestamp</span><span class="p">),</span>
<a id="__codelineno-0-113" name="__codelineno-0-113"></a>        <span class="p">},</span>
<a id="__codelineno-0-114" name="__codelineno-0-114"></a>        <span class="n">proto_data</span><span class="o">=</span><span class="n">any_message</span><span class="p">,</span>  <span class="c1"># The actual payload, safely packaged</span>
<a id="__codelineno-0-115" name="__codelineno-0-115"></a>    <span class="p">)</span>
<a id="__codelineno-0-116" name="__codelineno-0-116"></a>
<a id="__codelineno-0-117" name="__codelineno-0-117"></a>    <span class="k">return</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">BackgroundResponse</span><span class="p">(</span><span class="n">cloud_event</span><span class="o">=</span><span class="n">cloud_event</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h6 id="utils.some.Some.fake_service_response" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">fake_service_response</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nf">fake_service_response</span><span class="p">(</span><span class="n">service_name</span><span class="p">,</span> <span class="n">protocol</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>🎪 Simulate a realistic service call with all the drama of real networking!</p>
<p>This method pretends to call an external service by sleeping for a random
duration (because real services are unpredictable) and then returns a
properly formatted response. It's like method acting for microservices! 🎭</p>
<p>Perfect for:</p>
<ul>
<li>Testing background processing patterns</li>
<li>Demonstrating concurrent service calls</li>
<li>Creating realistic delays in development</li>
<li>Impressing your colleagues with your attention to detail</li>
</ul>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>service_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the service being "called" (e.g., "user-service")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>protocol</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Protocol type (rest, grpc, mqtt, etc.)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="basic.service.v1.service_pb2.SomeServiceResponse">SomeServiceResponse</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>service_pb2.SomeServiceResponse: A realistic-looking service response</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="timing" open>
  <summary>Timing</summary>
  <p>Random delay between 1-3 seconds (because real services are moody)</p>
</details>

<details class="response-format" open>
  <summary>Response Format</summary>
  <ul>
<li>Unique UUID for tracking</li>
<li>Service name and version info</li>
<li>Protocol data wrapped in SomeServiceData</li>
</ul>
</details>

<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>some = Some()
response = some.fake_service_response("auth-service", "grpc")
response.name
"auth-service"
response.data.type
"protocol"</p>
</blockquote>
</blockquote>
</blockquote>
</details>

<details class="note" open>
  <summary>Note</summary>
  <p>This method uses time.sleep() which blocks the thread! That's why
the Background service calls it with asyncio.to_thread() to avoid
blocking the event loop. Safety first! 🛡️</p>
</details>

            <details class="quote">
              <summary>Source code in <code>utils/some.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span>
<span class="normal"><a href="#__codelineno-0-143">143</a></span>
<span class="normal"><a href="#__codelineno-0-144">144</a></span>
<span class="normal"><a href="#__codelineno-0-145">145</a></span>
<span class="normal"><a href="#__codelineno-0-146">146</a></span>
<span class="normal"><a href="#__codelineno-0-147">147</a></span>
<span class="normal"><a href="#__codelineno-0-148">148</a></span>
<span class="normal"><a href="#__codelineno-0-149">149</a></span>
<span class="normal"><a href="#__codelineno-0-150">150</a></span>
<span class="normal"><a href="#__codelineno-0-151">151</a></span>
<span class="normal"><a href="#__codelineno-0-152">152</a></span>
<span class="normal"><a href="#__codelineno-0-153">153</a></span>
<span class="normal"><a href="#__codelineno-0-154">154</a></span>
<span class="normal"><a href="#__codelineno-0-155">155</a></span>
<span class="normal"><a href="#__codelineno-0-156">156</a></span>
<span class="normal"><a href="#__codelineno-0-157">157</a></span>
<span class="normal"><a href="#__codelineno-0-158">158</a></span>
<span class="normal"><a href="#__codelineno-0-159">159</a></span>
<span class="normal"><a href="#__codelineno-0-160">160</a></span>
<span class="normal"><a href="#__codelineno-0-161">161</a></span>
<span class="normal"><a href="#__codelineno-0-162">162</a></span>
<span class="normal"><a href="#__codelineno-0-163">163</a></span>
<span class="normal"><a href="#__codelineno-0-164">164</a></span>
<span class="normal"><a href="#__codelineno-0-165">165</a></span>
<span class="normal"><a href="#__codelineno-0-166">166</a></span>
<span class="normal"><a href="#__codelineno-0-167">167</a></span>
<span class="normal"><a href="#__codelineno-0-168">168</a></span>
<span class="normal"><a href="#__codelineno-0-169">169</a></span>
<span class="normal"><a href="#__codelineno-0-170">170</a></span>
<span class="normal"><a href="#__codelineno-0-171">171</a></span>
<span class="normal"><a href="#__codelineno-0-172">172</a></span>
<span class="normal"><a href="#__codelineno-0-173">173</a></span>
<span class="normal"><a href="#__codelineno-0-174">174</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="k">def</span><span class="w"> </span><span class="nf">fake_service_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">service_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">protocol</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">SomeServiceResponse</span><span class="p">:</span>
<a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="sd">    🎪 Simulate a realistic service call with all the drama of real networking!</span>
<a id="__codelineno-0-122" name="__codelineno-0-122"></a>
<a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="sd">    This method pretends to call an external service by sleeping for a random</span>
<a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="sd">    duration (because real services are unpredictable) and then returns a</span>
<a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="sd">    properly formatted response. It&#39;s like method acting for microservices! 🎭</span>
<a id="__codelineno-0-126" name="__codelineno-0-126"></a>
<a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="sd">    Perfect for:</span>
<a id="__codelineno-0-128" name="__codelineno-0-128"></a>
<a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="sd">    - Testing background processing patterns</span>
<a id="__codelineno-0-130" name="__codelineno-0-130"></a><span class="sd">    - Demonstrating concurrent service calls</span>
<a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="sd">    - Creating realistic delays in development</span>
<a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="sd">    - Impressing your colleagues with your attention to detail</span>
<a id="__codelineno-0-133" name="__codelineno-0-133"></a>
<a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="sd">    Args:</span>
<a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="sd">        service_name (str): Name of the service being &quot;called&quot; (e.g., &quot;user-service&quot;)</span>
<a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="sd">        protocol (str): Protocol type (rest, grpc, mqtt, etc.)</span>
<a id="__codelineno-0-137" name="__codelineno-0-137"></a>
<a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="sd">    Returns:</span>
<a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="sd">        service_pb2.SomeServiceResponse: A realistic-looking service response</span>
<a id="__codelineno-0-140" name="__codelineno-0-140"></a>
<a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="sd">    Timing:</span>
<a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="sd">        Random delay between 1-3 seconds (because real services are moody)</span>
<a id="__codelineno-0-143" name="__codelineno-0-143"></a>
<a id="__codelineno-0-144" name="__codelineno-0-144"></a><span class="sd">    Response Format:</span>
<a id="__codelineno-0-145" name="__codelineno-0-145"></a><span class="sd">        - Unique UUID for tracking</span>
<a id="__codelineno-0-146" name="__codelineno-0-146"></a><span class="sd">        - Service name and version info</span>
<a id="__codelineno-0-147" name="__codelineno-0-147"></a><span class="sd">        - Protocol data wrapped in SomeServiceData</span>
<a id="__codelineno-0-148" name="__codelineno-0-148"></a>
<a id="__codelineno-0-149" name="__codelineno-0-149"></a><span class="sd">    Example:</span>
<a id="__codelineno-0-150" name="__codelineno-0-150"></a><span class="sd">        &gt;&gt;&gt; some = Some()</span>
<a id="__codelineno-0-151" name="__codelineno-0-151"></a><span class="sd">        &gt;&gt;&gt; response = some.fake_service_response(&quot;auth-service&quot;, &quot;grpc&quot;)</span>
<a id="__codelineno-0-152" name="__codelineno-0-152"></a><span class="sd">        &gt;&gt;&gt; response.name</span>
<a id="__codelineno-0-153" name="__codelineno-0-153"></a><span class="sd">        &quot;auth-service&quot;</span>
<a id="__codelineno-0-154" name="__codelineno-0-154"></a><span class="sd">        &gt;&gt;&gt; response.data.type</span>
<a id="__codelineno-0-155" name="__codelineno-0-155"></a><span class="sd">        &quot;protocol&quot;</span>
<a id="__codelineno-0-156" name="__codelineno-0-156"></a>
<a id="__codelineno-0-157" name="__codelineno-0-157"></a><span class="sd">    Note:</span>
<a id="__codelineno-0-158" name="__codelineno-0-158"></a><span class="sd">        This method uses time.sleep() which blocks the thread! That&#39;s why</span>
<a id="__codelineno-0-159" name="__codelineno-0-159"></a><span class="sd">        the Background service calls it with asyncio.to_thread() to avoid</span>
<a id="__codelineno-0-160" name="__codelineno-0-160"></a><span class="sd">        blocking the event loop. Safety first! 🛡️</span>
<a id="__codelineno-0-161" name="__codelineno-0-161"></a><span class="sd">    &quot;&quot;&quot;</span>
<a id="__codelineno-0-162" name="__codelineno-0-162"></a>    <span class="c1"># Simulate realistic network delay (1-3 seconds of &quot;networking&quot;)</span>
<a id="__codelineno-0-163" name="__codelineno-0-163"></a>    <span class="n">_time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))</span>
<a id="__codelineno-0-164" name="__codelineno-0-164"></a>
<a id="__codelineno-0-165" name="__codelineno-0-165"></a>    <span class="c1"># Create a realistic service response with all the proper fields</span>
<a id="__codelineno-0-166" name="__codelineno-0-166"></a>    <span class="k">return</span> <span class="n">service_pb2</span><span class="o">.</span><span class="n">SomeServiceResponse</span><span class="p">(</span>
<a id="__codelineno-0-167" name="__codelineno-0-167"></a>        <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()),</span>  <span class="c1"># Every response gets its own tracking ID</span>
<a id="__codelineno-0-168" name="__codelineno-0-168"></a>        <span class="n">name</span><span class="o">=</span><span class="n">service_name</span><span class="p">,</span>     <span class="c1"># The service we &quot;called&quot;</span>
<a id="__codelineno-0-169" name="__codelineno-0-169"></a>        <span class="n">version</span><span class="o">=</span><span class="s2">&quot;v1&quot;</span><span class="p">,</span>          <span class="c1"># Always version your services, kids!</span>
<a id="__codelineno-0-170" name="__codelineno-0-170"></a>        <span class="n">data</span><span class="o">=</span><span class="n">service_pb2</span><span class="o">.</span><span class="n">SomeServiceData</span><span class="p">(</span>
<a id="__codelineno-0-171" name="__codelineno-0-171"></a>            <span class="n">value</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">protocol</span><span class="p">),</span>  <span class="c1"># What protocol we &quot;used&quot;</span>
<a id="__codelineno-0-172" name="__codelineno-0-172"></a>            <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;protocol&quot;</span><span class="p">,</span>      <span class="c1"># Metadata about the data type</span>
<a id="__codelineno-0-173" name="__codelineno-0-173"></a>        <span class="p">),</span>
<a id="__codelineno-0-174" name="__codelineno-0-174"></a>    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.highlight", "search.share", "content.code.copy", "content.action.edit", "content.action.view"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>